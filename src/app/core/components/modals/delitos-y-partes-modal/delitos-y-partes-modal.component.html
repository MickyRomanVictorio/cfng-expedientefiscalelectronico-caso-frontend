<div *ngIf="isRendered" class="margenes">
  <app-encabezado-modal titulo="Delitos y Partes" [referenciaModal]="referenciaModal"
    [numeroCaso]="numeroCaso"></app-encabezado-modal>
  <div class="delitos-titulo">
    <h3 class="cfe-subtitulo-3 cfe-semi-bold">Delitos:</h3>
    <div class="delitos-contenedor">
      <div class="delitos-no-encontrados" *ngIf="delitosCaso.length === 0">
        -
      </div>
      <div class="delito-tipo" *ngFor="let delito of delitosCaso">
        {{ delito }}
      </div>
    </div>
  </div>
  <div class="cfe-tabla-white">
    <p-table [value]="sujetosProcesalesFiltrados" [paginator]="false" [rowHover]="true" [rows]="5"
      [showCurrentPageReport]="true" [tableStyle]="{ 'min-width': '10rem' }"
      currentPageReportTemplate="{first} de {last} registros" [rowsPerPageOptions]="[5, 15, 30]"
      [styleClass]="'p-datatable-sm'" responsiveLayout="stack">
      <ng-template pTemplate="header" let-columns>
        <tr>
          <th class="columna-tipo-sujeto">Tipo de sujeto procesal</th>
          <th class="columna-tipo-documento">Tipo de documento</th>
          <th class="columna-numero-documento">Número de documento</th>
          <th class="columna-nombre">Nombres y Apellidos / Razón Social</th>
          <th class="columna-telefono">Teléfono</th>
          <th class="columna-correo">Correo</th>
          <th class="columna-delitos">Delito(s)</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-partes>
        <tr class="p-selectable-row">
          <td>
            <span class="p-column-title">Tipo de sujeto procesal</span>
            {{ partes.tipo }}
          </td>
          <td class="columna-tipo-documento">
            <span class="p-column-title">Tipo de documento</span>
            {{ partes.tipoDocumento }}
          </td>
          <td class="columna-numero-documento">
            <span class="p-column-title">Número de documento</span>
            {{ partes.numeroDocumento }}
          </td>
          <td>
            <span class="p-column-title">Nombres y Apellidos / Razón Social</span>
            {{ partes.nombre | capitalizar }}
          </td>
          <td>
            <span class="p-column-title">Teléfono</span>
            {{ partes.telefono }}
          </td>
          <td>
            <span class="p-column-title">Correo</span>
            {{ partes.correo }}
          </td>
          <td>
            <span class="p-column-title">Delito(s)</span>
            <div *ngIf="partes.delitos === null || partes.tipo !== DENUNCIADO">
              -
            </div>
            <br />
            <ng-container *ngIf="partes.tipo === DENUNCIADO">

              <div *ngIf="partes.delitos !== null">
                <div class="delito-registrado" *ngFor="let delito of partes.delitos.split('||')">
                  {{ delito }}
                </div>
              </div>

              @if (usuarioAuthService.esJerarquiaProvincial() === true) {
                <button [disabled]="flagAnulado === 1" *ngIf="flagAnulado !== 1" class="cfe-boton-secondary cfe-boton-sm w-full btn-tipicar-delitos"
                  (click)="tipificarDelitos( partes.id, partes.nombre, partes.delitos )">
                  Tipificar delitos
                </button>
              }
            </ng-container>
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="8">No se encontró información de denuncias y partes.</td>
        </tr>
      </ng-template>
    </p-table>
    <app-paginator [query]="query" [items]="itemPaginado" [rowsPerPageOptions]="[]"
      (paginate)="onPaginate($event)"></app-paginator>
  </div>

</div>
