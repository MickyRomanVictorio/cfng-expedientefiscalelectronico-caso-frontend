<div class="indicador-card grid">
  <!-- Parte izquierda: Icono y número -->

  <div class="col-3 mt-3 indicador-left " style="height: 100%">
    <div class="icono-indicador mb-1 flex ">
      @if(getIcon(indicador['fondo']); as icono){
      <img [src]="icono" alt="" style="width: 60px; height: 60px" />
      }
    </div>
    <div class="flex flex-column align-items-center">
      <span class="cantidad-indicador text-center" [ngClass]="{
    'color-naranja': indicador.fondo === 'fondoAmarillo',
    'color-verde': indicador.fondo === 'fondoVerde',
    'color-negro': indicador.fondo === 'fondoNegro',
    'color-gris': indicador.fondo === 'fondoGris',
    'color-celeste': indicador.fondo === 'fondoCeleste',
     'color-rojo': indicador.fondo === 'fondoRojo',
     'color-guinda': indicador.fondo === 'fondoGuinda',
  }">{{ indicador.cantidadCasos }}</span>
      <p [ngClass]="{
    'color-naranja': indicador.fondo === 'fondoAmarillo',
    'color-verde': indicador.fondo === 'fondoVerde',
    'color-negro': indicador.fondo === 'fondoNegro',
    'color-gris': indicador.fondo === 'fondoGris',
    'color-celeste': indicador.fondo === 'fondoCeleste',
     'color-rojo': indicador.fondo === 'fondoRojo',
     'color-guinda': indicador.fondo === 'fondoGuinda',
  }">
        casos
      </p>
    </div>
  </div>

  <!-- Parte derecha: resto de la información -->
  <div class="col-8 indicador-right flex flex-column justify-content-between" style="height: 100%">
    <div class="mt-3">
      <label class="titulo-indicador" [innerHTML]="getTituloConSalto(indicador.titulo)">
      </label>
      @if(indicador.titulo!=='APELACIONES'){
      <div class="flex flex-wrap gap-2 py-1 mt-2 ">
        <div class="flex align-items-center mr-3 plazo-verde">
          <span class="plazo-item dentro-del-plazo"></span> Dentro del Plazo
          <div class="quantity">({{ indicador.dentroPlazo }})</div>
        </div>
        <div class="flex align-items-center mr-3 plazo-naranja">
          <span class="plazo-item plazo-por-vencer"></span> Plazo por Vencer
          <div class="quantity">({{ indicador.plazoPorVencer }})</div>
        </div>
        <div class="flex align-items-center mr-3 plazo-rojo">
          <span class="plazo-item plazo-vencido"></span> Plazo vencido
          <div class="quantity">({{ indicador.plazoVencido }})</div>
        </div>
      </div>
      }

      <div class="flex flex-column mt-4 gap-2">
        <div>
          <div class="flex align-items-center gap-2">
            <span style="display: flex; align-items: center">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M19.0547 2H5.05469C4.25928 2.00079 3.49668 2.31712 2.93425 2.87956C2.37181 3.44199 2.05548 4.20459 2.05469 5V19C2.05548 19.7954 2.37181 20.558 2.93425 21.1204C3.49668 21.6829 4.25928 21.9992 5.05469 22H19.0547C19.8501 21.9992 20.6127 21.6829 21.1752 21.1204C21.7376 20.558 22.0539 19.7954 22.0547 19V5C22.0539 4.20459 21.7376 3.44199 21.1752 2.87956C20.6127 2.31712 19.8501 2.00079 19.0547 2ZM5.05469 4H19.0547C19.3199 4.00026 19.5741 4.10571 19.7615 4.29319C19.949 4.48066 20.0545 4.73486 20.0547 5V13H17.5887C17.2595 12.9997 16.9353 13.0808 16.645 13.2361C16.3547 13.3913 16.1072 13.616 15.9247 13.89L14.5187 16H9.58869L8.18269 13.89C8.00019 13.616 7.75276 13.3913 7.46245 13.2361C7.17213 13.0808 6.84792 12.9997 6.51869 13H4.05469V5C4.05496 4.73486 4.1604 4.48066 4.34788 4.29319C4.53535 4.10571 4.78956 4.00026 5.05469 4ZM19.0547 20H5.05469C4.78956 19.9997 4.53535 19.8943 4.34788 19.7068C4.1604 19.5193 4.05496 19.2651 4.05469 19V15H6.51869L7.92469 17.11C8.10719 17.384 8.35462 17.6087 8.64493 17.7639C8.93525 17.9192 9.25946 18.0003 9.58869 18H14.5187C14.848 18.0003 15.1722 17.9192 15.4625 17.7639C15.7528 17.6087 16.0002 17.384 16.1827 17.11L17.5887 15H20.0537V19C20.0535 19.2651 19.948 19.5193 19.7605 19.7068C19.5731 19.8943 19.3199 19.9997 19.0547 20Z"
                  fill="#333333" />
              </svg>
            </span>
            <label class="ml-1">Pendientes <br />
              pronunciamiento</label>
            <span class="mr-grande" style="margin-left: auto">{{
              indicador.pendientesPronunciamiento
              }}</span>
          </div>
        </div>
        <div>
          <div class="flex align-items-center gap-2">
            <span style="display: flex; align-items: center">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path
                  d="M20 8.94C19.9896 8.84813 19.9695 8.75763 19.94 8.67V8.58C19.8919 8.47718 19.8278 8.38267 19.75 8.3L13.75 2.3C13.6673 2.22222 13.5728 2.15808 13.47 2.11C13.4402 2.10576 13.4099 2.10576 13.38 2.11C13.2784 2.05174 13.1662 2.01434 13.05 2H7C6.20435 2 5.44129 2.31607 4.87868 2.87868C4.31607 3.44129 4 4.20435 4 5V19C4 19.7956 4.31607 20.5587 4.87868 21.1213C5.44129 21.6839 6.20435 22 7 22H17C17.7956 22 18.5587 21.6839 19.1213 21.1213C19.6839 20.5587 20 19.7956 20 19V8.94ZM14 5.41L16.59 8H15C14.7348 8 14.4804 7.89464 14.2929 7.70711C14.1054 7.51957 14 7.26522 14 7V5.41ZM18 19C18 19.2652 17.8946 19.5196 17.7071 19.7071C17.5196 19.8946 17.2652 20 17 20H7C6.73478 20 6.48043 19.8946 6.29289 19.7071C6.10536 19.5196 6 19.2652 6 19V5C6 4.73478 6.10536 4.48043 6.29289 4.29289C6.48043 4.10536 6.73478 4 7 4H12V7C12 7.79565 12.3161 8.55871 12.8787 9.12132C13.4413 9.68393 14.2044 10 15 10H18V19ZM14.29 12.29L11 15.59L9.71 14.29C9.5217 14.1017 9.2663 13.9959 9 13.9959C8.7337 13.9959 8.4783 14.1017 8.29 14.29C8.1017 14.4783 7.99591 14.7337 7.99591 15C7.99591 15.2663 8.1017 15.5217 8.29 15.71L10.29 17.71C10.383 17.8037 10.4936 17.8781 10.6154 17.9289C10.7373 17.9797 10.868 18.0058 11 18.0058C11.132 18.0058 11.2627 17.9797 11.3846 17.9289C11.5064 17.8781 11.617 17.8037 11.71 17.71L15.71 13.71C15.8983 13.5217 16.0041 13.2663 16.0041 13C16.0041 12.7337 15.8983 12.4783 15.71 12.29C15.5217 12.1017 15.2663 11.9959 15 11.9959C14.7337 11.9959 14.4783 12.1017 14.29 12.29Z"
                  fill="#333333" />
              </svg>
            </span>
            <label class="ml-1">Por Asignar</label>
            <span class="mr-grande" style="margin-left: auto">{{
              indicador.casosPorAsignar
              }}</span>
          </div>
        </div>
        <div>
          <div class="flex align-items-center gap-2">
            <span style="display: flex; align-items: center">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_9937_201732)">
                  <path
                    d="M15.098 12.634L13 11.423V7C13 6.73478 12.8946 6.48043 12.7071 6.29289C12.5196 6.10536 12.2652 6 12 6C11.7348 6 11.4804 6.10536 11.2929 6.29289C11.1054 6.48043 11 6.73478 11 7V12C11 12.1755 11.0462 12.348 11.134 12.5C11.2218 12.652 11.348 12.7782 11.5 12.866L14.098 14.366C14.2118 14.4327 14.3376 14.4762 14.4683 14.4941C14.5989 14.512 14.7319 14.5038 14.8594 14.4701C14.9869 14.4364 15.1064 14.3778 15.2112 14.2977C15.3159 14.2176 15.4038 14.1175 15.4698 14.0033C15.5357 13.8891 15.5784 13.763 15.5954 13.6322C15.6124 13.5014 15.6034 13.3686 15.5688 13.2413C15.5343 13.114 15.4749 12.9949 15.3941 12.8906C15.3133 12.7864 15.2126 12.6992 15.098 12.634ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C21.9971 9.34873 20.9426 6.80688 19.0679 4.93215C17.1931 3.05742 14.6513 2.00291 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C19.9974 14.1209 19.1537 16.1542 17.6539 17.6539C16.1542 19.1536 14.1209 19.9974 12 20Z"
                    fill="#333333" />
                </g>
                <defs>
                  <clipPath id="clip0_9937_201732">
                    <rect width="24" height="24" fill="white" />
                  </clipPath>
                </defs>
              </svg>
            </span>
            <label class="ml-1">Asignados</label>
            <span class="mr-grande" style="margin-left: auto">{{
              indicador.casosAsignados
              }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  @if(indicador.titulo=='APELACIONES'){
  <div class="mb-3">
    <span class="mr-grande" style="color: white"></span>
    <span class="mr-grande" style="color: white"></span>
  </div>
  }

  <!-- Footer acordeón ocupa todo el ancho -->
  <div id="acorden" class="col-12 p-0">
    <div class="custom-accordion">
      <!-- Cabecera del acordeón (siempre visible) -->
      @if(!isAccordionOpen) {
      <div class="accordion-header" (click)="toggleAccordion()">
        {{ isAccordionOpen ? "Menos detalles ▲" : "Más detalles ▼" }}
      </div>
      }
      <!-- Contenido del acordeón (solo visible cuando está expandido) -->
      <div class="accordion-content" [class.open]="isAccordionOpen">
        <!-- Aquí va el contenido que quieres mostrar cuando se expanda -->
        <div class="acordeon-detalle-content">
          <div class="mb-1">
            <span class="acordeon-tipo-contenido">{{
              indicador.masDetalles?.tipoContenido
              }}</span>
          </div>
          <div class="flex flex-wrap gap-2 py-1">
            <ng-container *ngFor="let item of convertirMasDetalles(indicador.masDetalles)">
              <div class="flex align-items-center mr-3 plazo-blanco">
                <span class="plazo-item circulito-negro"></span>
                {{ item.textoValor }}
                <div class="quantity">({{ item.numeroValor }})</div>
              </div>
            </ng-container>
          </div>
          @if(indicador.masDetallesActos){
          <div class="py-1">
            <div class="mb-1">
              <span class="acordeon-tipo-contenido">
                {{ indicador.tituloMasDetallesActos }}
              </span>
            </div>
            <div class="flex flex-column">
              <ng-container *ngFor="let item of indicador.masDetallesActos">
                <div class="inline-flex align-items-center plazo-blanco mb-1"
                  style="width: auto; max-width: max-content;">
                  <span class="plazo-item circulito-negro"></span>
                  {{ item.titulo }}
                  <div class="quantity">({{ item.cantidadCasos }})</div>
                </div>
              </ng-container>
            </div>
          </div>
          }
        </div>

        <!-- Footer del acordeón (solo visible cuando está expandido) -->
        <div class="accordion-footer" (click)="toggleAccordion()">
          Menos detalles ▲
        </div>
      </div>
    </div>
  </div>
</div>