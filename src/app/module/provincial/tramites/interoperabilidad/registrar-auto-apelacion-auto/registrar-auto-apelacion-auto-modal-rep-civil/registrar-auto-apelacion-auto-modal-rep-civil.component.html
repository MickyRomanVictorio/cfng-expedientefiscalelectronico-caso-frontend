<div class="">
  <div class="cfe-encabezado-modal">
    <h3
      [innerHTML]="tituloModal"
      class="cfe-encabezado-titulo cfe-subtitulo-3 cfe-semi-bold">
    </h3>
    <fn-icon
      (click)="cerrarModal()"
      [ico]="obtenerIcono('iClose')"
      class="cfe-encabezado-cerrar"
      height="2rem">
    </fn-icon>
  </div>
  <br/>
  <h6 class="cfe-encabezado-titulo cfe-subtitulo-3 cfe-semi-bold">Pestaña de apelación N° 0{{nuPestana}}</h6>
  <h6
    class="cfe-encabezado-titulo cfe-subtitulo-3 cfe-semi-bold mt-4"
    [innerHTML]="tituloCaso"
  ></h6>
  <h6 *ngIf="nivelApelacion === 'sujeto'">Seleccione los sujetos procesales a los que se le ha declara admisible y/o inadmisible la calificación de la apelación por la Sala Superior.</h6>
  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 100 100">
    <circle cx="50" cy="50" r="40" fill="#3cc85a"/>
  </svg>
  <span class="ml-1">Resultado de la apelación presentada por el fiscal provincial ({{nuApelacionFiscal}})</span>
  <svg class="ml-3" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 100 100">
    <circle cx="50" cy="50" r="40" fill="#B3B3B3"/>
  </svg>
  <span class="ml-1">Apelaciones desestimadas</span>

  <div class="p-col-12 mt-5">
    <div class="flex align-items-center">
      <h6 class="cfe-titulo-1">Lista de Apelaciones realizadas a la reparación civil</h6>
    </div>
    <p-table
      class="table-apelaciones"
      [value]="sujetosProcesalesFiltrados"
      responsiveLayout="stack"
      [paginator]="true"
      dataKey="nombre" [rows]="10"
      [showCurrentPageReport]="true"
      [tableStyle]="{ 'min-width': '50rem' }"
      currentPageReportTemplate="{first} de {last} registros">
      <ng-template pTemplate="header">
        <tr>
          <th>Nº</th>
          <th>Reparación civil</th>
          <th>¿Quién apeló?</th>
          <th>¿Qué resultado se obtuvo de la apelación?</th>
          <th>¿Queja?</th>
          <th>Resultado de la calificación (2da instancia)</th>
          <th>Resultado de la resolución (2da instancia)</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-item let-rowIndex="rowIndex">
        <tr>
          <td>{{ rowIndex + 1 }}</td>
          <td>{{ item.codigoReparacion }}</td>
          <td>{{ item.nombreSujeto }}</td>
          <td style="font-weight: bold;">{{ item.resultadoApelacion }}</td>
          <td>{{item.resultadoApelacion=='CONCEDE APELACIÓN'? '-': item.queja }}</td>
          <td style="text-align: left; vertical-align: middle">{{ item.noTipoRespuestaInstancia2 ?? "-" }}</td>
          <td style="text-align: center; vertical-align: middle;">
            <span class="p-column-title font-semibold">Resultado de la calificación (2da instancia)</span>
            <p-dropdown styleClass="py-1 p-inputtext-lg" placeholder="Seleccione..."
                        [options]="listaRespuesta"
                        optionLabel="nombre"
                        optionValue="id"
                        appendTo="body"
                        (onChange)="onSelectionChange(item, $event)"
                        [(ngModel)]="item.idTipoRespuestaResolucionInstancia2"
                        [showClear]="true"
                        [disabled]="soloLectura"
            >
              <ng-template let-respuesta pTemplate="item">
                <div class="flex align-items-center gap-2">
                  <div>{{ respuesta.nombre }}</div>
                </div>
              </ng-template>
            </p-dropdown>
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="6">
            <div class="text-center">No se registraron apelaciones de reparación civil.</div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
<div class="col-12 flex align-items-center justify-content-center mt-2 mb-2">
  <button class="cfe-boton-opcion cfe-boton-secondary cfe-boton-lg font-semibold with-button"
          (click)="cancelar()">
    Cancelar
  </button>
  <button class="ml-3 cfe-boton-primary cfe-boton-lg font-semibold with-button"
          [disabled]="!mostrarBtnAceptar || soloLectura"
          (click)="aceptar()">
    Aceptar
  </button>
</div>
