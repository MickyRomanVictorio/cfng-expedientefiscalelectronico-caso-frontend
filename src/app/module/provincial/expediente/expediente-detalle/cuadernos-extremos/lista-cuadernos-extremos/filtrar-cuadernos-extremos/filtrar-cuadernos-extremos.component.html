<form [formGroup]="form">

  <div class="grid">
    <div class="col">
      <div class="field mb-0">
        <label for="buscar" class="font-semibold">Buscar</label>
        <input id="buscar" name="buscar" formControlName="buscar"  pInputText type="text" class="py-2 px-3 text-lg w-full border-1 border-solid border-500 border-round-sm font-normal focus:border-primary outline-none"
        (keyup)="eventoBuscarSegunTexto()" placeholder="Ingrese algún texto para buscar, por ejemplo el número del cuaderno, nombre de las partes, etc" autocomplete="off" />
      </div>
    </div>
    <div class="col-fixed align-content-end p-0" style="width: 70px;">
      <div class="px-2 pb-2 pt-3" [ngClass]="{'bg-filtro': esVisibleFiltros}">
        <button class="cfe-filtro-boton h-auto py-1" (click)="esVisibleFiltros=!esVisibleFiltros">
          <fn-icon [ico]="iconUtil.obtenerIcono('iFilterShow')"
                   [ngStyle]="{ 'transform': esVisibleFiltros ? 'rotate(180deg)' : 'none' }" height="2rem"></fn-icon>
        </button>
      </div>
    </div>
  </div>
  @if (!esVisibleFiltros) {
  <div class="mt-3 mb-4">

    <div class="flex flex-wrap gap-3">

      <div class="flex align-items-center">
        <p-radioButton value="0" formControlName="filtroTiempo" (onClick)="eventoCambiarFiltroTiempo($event.value)"
          inputId="ultimoSeisMeses"></p-radioButton>
        <label for="ultimoSeisMeses" class="ml-2">Últimos 6 meses</label>
      </div>

      <div class="flex align-items-center">
        <p-radioButton value="1" formControlName="filtroTiempo" (onClick)="eventoCambiarFiltroTiempo($event.value)"
          inputId="todosLosMeses"></p-radioButton>
        <label for="todosLosMeses" class="ml-2">Todos los meses</label>
      </div>

    </div>

  </div>
  }

  @if (esVisibleFiltros) {
  <div class="grid mt-0 mb-3">
    <div class="col-12 pr-0 pt-0">
      <div class="bg-filtro p-2 md:p-4">
        <div class="grid">
          <div class="field col-12">
            <div class="flex align-items-center flex-wrap gap-2">
              <div class="flex align-items-center mr-2">
                <p-radioButton value="0" formControlName="tipoFecha" name="tipoFecha"
                  inputId="tipoFechaRegistro"></p-radioButton>
                <label for="tipoFechaRegistro" class="ml-2 font-semibold">Fecha de creación</label>
              </div>
              <div class="flex align-items-center mr-2">
                <p-radioButton value="1" formControlName="tipoFecha" name="tipoFecha"
                  inputId="tipoFechaUltimoTramite"></p-radioButton>
                <label for="tipoFechaUltimoTramite" class="ml-2 font-semibold">Fecha de último trámite</label>
              </div>
            </div>
          </div>
        </div>

        <div class="grid">
          <div class="col-12 md:col-6">
            <label class="font-bold block pb-2">Fecha</label>
            <div class="flex flex-column md:flex-row">
              <p-calendar dateMask class="cfe-calendar" [showIcon]="true" icon="cfe-calendar-icon"
                placeholder="dd/mm/aaaa" dateFormat="dd/mm/yy" formControlName="fechaInicio"
                inputId="fechaInicio"></p-calendar>
              <p-calendar dateMask class="cfe-calendar pl-0 md:pl-2" [showIcon]="true" icon="cfe-calendar-icon"
                placeholder="dd/mm/aaaa" dateFormat="dd/mm/yy" formControlName="fechaFin"
                inputId="fechaFin"></p-calendar>
            </div>
          </div>

          @if (tipoVista===TipoVistaEnum.Grilla) {
          <div class="col-12 md:col-6">
            <label class="p-label-bottom font-bold" for="orderPor">Ordenar por</label>
            <div class="grid">
              <div class="col">
                <p-dropdown formControlName="ordenarPor" styleClass="p-inputtext-lg" placeholder="Seleccione"
                  [options]="ordenarPor" optionLabel="label" optionValue="value"></p-dropdown>
              </div>
              <div class="col">
                <label class="mb-0 pr-1"></label>
                <p-dropdown formControlName="tipoOrden" styleClass="p-inputtext-lg" placeholder="Seleccione"
                  [options]="tipoOrden" optionLabel="label" optionValue="value"></p-dropdown>
              </div>
            </div>
          </div>
          }
        </div>
        <div class="field grid">
          <div class="field col-12 lg:col-6">
            <label class="p-label-bottom font-bold" for="actoProcesal">Acto procesal</label>
            <p-dropdown formControlName="actoProcesal" styleClass="p-inputtext-lg" [options]="actoProcesales"
              optionLabel="label" optionValue="value" (onChange)="eventoCambiarActoProcesal($event.value)"
              emptyMessage="Sin resultados" placeholder="Todos" [showClear]="true"></p-dropdown>
          </div>
          <div class="field col-12 lg:col-6">
            <label class="p-label-bottom font-bold" for="tramite">Trámite</label>
            <p-dropdown formControlName="tramite" styleClass="p-inputtext-lg" [options]="tramites" optionLabel="label"
              optionValue="value" emptyMessage="Sin resultados" placeholder="Todos" [showClear]="true"></p-dropdown>
          </div>

        </div>
        <div class="flex align-items-center justify-content-end pb-2 pt-2">
          <button type="button" class="cfe-boton-secondary cfe-boton-lg inline w-full md:w-auto family-poppin-bold" (click)="eventoLimpiar()">Limpiar
            filtros</button>
          <button type="button" class="cfe-boton-primary cfe-boton-lg inline ml-0 md:ml-2 mt-1 md:mt-0 md:w-auto family-poppin-bold"
            (click)="eventoBuscar()">Buscar</button>
        </div>
      </div>
    </div>
  </div>
  }

</form>
