<form [formGroup]="form">
  <!-- Ini - Buscador -->
  <div class="grid">
    <div class="col">
      <div class="field mb-0">
        <label for="buscar" class="font-semibold">Buscar</label>
        <input
          id="buscar"
          (input)="eventoBuscarText($event)"
          pInputText
          type="text"
          class="py-2 px-3 text-lg w-full border-1 border-solid border-500 border-round-sm font-normal focus:border-primary outline-none"
          placeholder="Buscar en la lista. Puede incluir datos como el número de incidente, tipo de trámite, etapa, trámite y sujeto"
          autocomplete="off"
        />
      </div>
    </div>
    <div class="col-fixed align-content-end p-0" style="width: 70px">
      <div class="px-2 pb-2 pt-3" [ngClass]="{ 'bg-filtro': mostrarFiltro }">
        <button
          class="cfe-filtro-boton h-auto py-1"
          (click)="mostrarFiltro = !mostrarFiltro"
        >
          <fn-icon
            [ico]="iconUtil.obtenerIcono('iFilterShow')"
            [ngStyle]="{ transform: mostrarFiltro ? 'rotate(180deg)' : 'none' }"
            height="2rem"
          ></fn-icon>
        </button>
      </div>
    </div>
  </div>
  <!-- Fin - Buscador -->

  <!-- Ini - Formulario de Filtro -->
  @if (mostrarFiltro === true) {
  <div class="grid mt-0 mb-3">
    <div class="col-12 pr-0 pt-0">
      <div class="bg-filtro">
        <div class="grid">
          <div class="col-12 md:col-6">
            <label class="font-bold block pb-2">Fecha de ingreso</label>
            <div class="flex flex-column md:flex-row">
              <p-calendar
                dateMask
                class="cfe-calendar sm:pb-2"
                [showIcon]="true"
                icon="cfe-calendar-icon"
                placeholder="dd/mm/aaaa"
                dateFormat="dd/mm/yy"
                formControlName="fechaDesdeIngreso"
              >
              </p-calendar>
              <p-calendar
                dateMask
                class="cfe-calendar pl-0 md:pl-2"
                [showIcon]="true"
                icon="cfe-calendar-icon"
                placeholder="dd/mm/aaaa"
                dateFormat="dd/mm/yy"
                formControlName="fechaHastaIngreso"
              >
              </p-calendar>
            </div>
          </div>

          <div class="col-12 md:col-6">
            <label class="font-bold block pb-2">Sujetos procesales</label>
            <div>
              <p-dropdown
                formControlName="sujetoProcesal"
                [filter]="true"
                styleClass="p-inputtext-lg"
                placeholder="Seleccione"
                appendTo="body"
                [options]="listaSujetosProcesales"
                optionLabel="nombre"
                optionValue="codigo"
              >
              </p-dropdown>
            </div>
          </div>
        </div>
        <div class="grid">
          <div class="col-12 md:col-4">
            <label class="font-bold block pb-2">Clasificación</label>
            <div>
              <p-dropdown
                formControlName="clasificacion"
                [filter]="true"
                styleClass="p-inputtext-lg"
                placeholder="Seleccione"
                appendTo="body"
                [options]="listaCatalogoClasificacion"
                optionLabel="noDescripcion"
                optionValue="id"
              >
              </p-dropdown>
            </div>
          </div>

          <div class="col-12 md:col-4">
            <label class="font-bold block pb-2">Etapa</label>
            <div>
              <p-dropdown
                formControlName="etapa"
                [filter]="true"
                styleClass="p-inputtext-lg"
                placeholder="Seleccione"
                appendTo="body"
                [options]="listaEtapas"
                optionLabel="nombre"
                optionValue="id"
              >
              </p-dropdown>
            </div>
          </div>

          <div class="col-12 md:col-4">
            <label class="font-bold block pb-2">Acto procesal</label>
            <div>
              <p-dropdown
                formControlName="actoProcesal"
                [filter]="true"
                styleClass="p-inputtext-lg"
                placeholder="Seleccione"
                appendTo="body"
                [options]="listaActosProcesales"
                optionLabel="nombre"
                optionValue="id"
              >
              </p-dropdown>
            </div>
          </div>
        </div>

        <div class="grid">
          <div class="col-12 text-right pt-4">
            <button
              type="button"
              class="cfe-boton-secondary cfe-boton-m inline w-full md:w-auto"
              (click)="eventoBuscar(TipoBusquedaEnum.Inicio)"
            >
              Limpiar filtros
            </button>
            <button
              type="button"
              class="cfe-boton-primary cfe-boton-m inline ml-0 md:ml-2 mt-1 md:mt-0 w-full md:w-auto"
              (click)="eventoBuscar(TipoBusquedaEnum.Personalizado)"
              style="min-width: auto"
            >
              Buscar
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  }
  <!-- Fin - Formulario de Filtro -->

  <!-- Ini - Filtro Inicial -->
  @if (!mostrarFiltro) {
  <div class="grid">
    <div class="col-12 pt-3">
      <div class="flex flex-wrap gap-3">
        <div class="flex align-items-center">
          <p-radioButton
            value="0"
            inputId="ultimoSeisMeses"
            id="ultimoSeisMeses"
            formControlName="filtroTiempo"
            (onClick)="eventoBuscar(TipoBusquedaEnum.UltimoMeses)"
          >
          </p-radioButton>
          <label for="ultimoSeisMeses" class="ml-2 font-semibold"
            >Últimos 6 meses</label
          >
        </div>
        <div class="flex align-items-center">
          <p-radioButton
            value="1"
            inputId="todosLosMeses"
            id="todosLosMeses"
            formControlName="filtroTiempo"
            (onClick)="eventoBuscar(TipoBusquedaEnum.Todos)"
          >
          </p-radioButton>
          <label for="todosLosMeses" class="ml-2 font-semibold"
            >Todos los meses</label
          >
        </div>
      </div>
    </div>
  </div>
  }
  <!-- Fin - Filtro Inicial -->
</form>

<p-toast></p-toast>
