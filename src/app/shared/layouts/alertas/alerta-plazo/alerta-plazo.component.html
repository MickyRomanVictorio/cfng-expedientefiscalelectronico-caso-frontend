<div class="cfe-dropdown__menu">
  <div class="cfe-dropdown__menu--header flex justify-content-between">
    <div class="cfe-title" style="width: 80%; text-align: start">
      <h2>Alertas</h2>
      <p>Plazos</p>
    </div>
    <div class="iconos" style="width: 20%">
      <div class="cfe-icon">
        <fn-icon
          [ico]="iconUtil.obtenerIcono('iAlert')"
          height="28px"
        ></fn-icon>
        <fn-icon
          onKeyPress
          class="cursor-pointer"
          [ico]="iconUtil.obtenerIcono('iClose')"
          height="28px"
          (click)="eventoCerrarModal()"
        ></fn-icon>
      </div>
    </div>
  </div>
  <div class="cfe-dropdown__menu--content border-round-bottom">
    <div class="cfe-tabs">
      <p-tabMenu
        class="cfe-tabs--plazos"
        [model]="menuItemsAlertasPlazos"
        [activeItem]="activeItemAlertaPlazo"
        (activeItemChange)="onActiveItemAlertaPlazoChange($event)"
      ></p-tabMenu>
    </div>
    <div class="scrollable-content">
      @if (activeItemAlertaPlazo.label === estadoAlertaPlazoEnum.PENDIENTES) {
      <div class="cfe-tabs__container">
        <div class="cfe-tabs__container--content">
          @for (item of listaAlertasPlazoPorAtender; track $index) {
          <div class="cfe-alerta__item alerta-plazo-pendiente">
            <div
              class="cfe-alerta__item--header-alerta-plazo-pendiente flex justify-content-between"
            >
              <h2>{{ item.titulo }}</h2>
              <img
                alt=""
                *ngIf="item.tipo === 'INFORMATIVA'"
                src="{{ DOMAIN_ASSETS + '/icons/info.svg' }}"
                style="width: 1.2rem"
              />
              <p-menu
                #menu
                [model]="items(item)"
                [popup]="true"
                class="absolute menu-options"
              ></p-menu>
              <i
                onKeyPress
                class="pi pi-ellipsis-h text-xl"
                (click)="menu.toggle($event)"
              ></i>
            </div>
            <div
              onKeyPress
              (click)="irAlerta(2, item)"
              class="cfe-alerta__item--content"
            >
              <p
                [innerHTML]="
                  item.texto | textoTiempoSegundos : item.fechaCreacion
                "
              ></p>
            </div>
            <div
              onKeyPress
              (click)="irAlerta(2, item)"
              class="cfe-alerta__item--time"
            >
              <span>Hace {{ item.fechaCreacion | tiempoSegundos }}</span>
            </div>
          </div>
          }
        </div>
      </div>
      } @else if (activeItemAlertaPlazo.label ===
      estadoAlertaPlazoEnum.SOLUCIONADAS) { @for (item of
      listaAlertasPlazoAtendidos; track $index) {
      <div class="cfe-tabs__container">
        <div class="cfe-tabs__container--content">
          <div class="cfe-alerta__item alerta-plazo-solucionadas">
            <div class="cfe-alerta__item--header">
              <h2>{{ item.titulo }}</h2>
            </div>
            <div class="cfe-alerta__item--content">
              <p
                [innerHTML]="
                  item.texto | textoTiempoSegundos : item.fechaCreacion
                "
              ></p>
            </div>
            <div class="cfe-alerta__item--time">
              <span>{{ item.fechaCreacion | tiempoSegundos }}</span>
            </div>
          </div>
        </div>
      </div>
      } }
    </div>
    <div
      onKeyPress
      class="cfe-tabs__actions_plazos border-round-bottom"
      (click)="verAlertas()"
    >
      <span>Ver todas las alertas</span>
    </div>
  </div>
</div>
