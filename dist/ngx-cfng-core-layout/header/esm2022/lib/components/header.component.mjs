import { CommonModule, Location, NgClass, TitleCasePipe } from '@angular/common';
import { Component, EventEmitter, Input, Output, inject } from '@angular/core';
import { RouterLink, RouterLinkActive } from '@angular/router';
import { MenuModule } from 'primeng/menu';
import { TipoMenuNavegacion } from '../models/configuracion.model';
import { HeaderService } from '../services/header.service';
import * as i0 from "@angular/core";
import * as i1 from "primeng/menu";
import * as i2 from "@angular/router";
import * as i3 from "@angular/common";
export class NgxCfngCoreLayoutHeaderComponent {
    baseAssetsUrl = '';
    aplicaciones = [];
    alertas = [];
    usuario = {};
    titulos = {};
    menuNavegacion = [];
    tipoMenu = TipoMenuNavegacion.Sidebar;
    menuNavegacionBotones = [];
    prefijoURL = '/app/'; //'/layout/layout/efe/' /app/
    menuNavegacionSeleccionado = new EventEmitter();
    mostrarMasOpciones = false;
    mostrarMenuNavegacionMovil = false;
    version = '0.0.1';
    //private sessionMenuId = 'mpeMnPr';//Usado para almacenar el menu seleccionado
    menuNavegacionSeleccionadoId = null;
    TipoMenuNavegacion = TipoMenuNavegacion;
    location = inject(Location);
    headerService = inject(HeaderService);
    menuDropdownActivo = null;
    subscription;
    ngOnInit() {
        this.cargarMenuInicial();
        this.subscription = this.headerService.actualizarHeader$.subscribe(() => {
            this.cargarMenuInicial();
        });
    }
    ngOnDestroy() {
        if (this.subscription) {
            this.subscription.unsubscribe();
        }
    }
    cargarMenuInicial() {
        const menu = this.headerService.getMenuActual(this.menuNavegacion, this.prefijoURL);
        if (menu) {
            this.sidebarMenuNavegacionSeleccionar(menu);
        }
    }
    eventoMenuNavegacionMovilMostrar() {
        this.mostrarMenuNavegacionMovil = !this.mostrarMenuNavegacionMovil;
    }
    eventoMenuNavegacionSeleccionar(e, menu) {
        if (this.tipoMenu === TipoMenuNavegacion.Sidebar) {
            this.sidebarMenuNavegacionSeleccionar(menu);
        }
        else {
            this.dropdownMenuNavegacionSeleccionar(menu);
        }
    }
    eventoSubmenuNavegacion(e, menu) {
        e.stopPropagation();
        menu.extended = false;
    }
    sidebarMenuNavegacionSeleccionar(menu) {
        this.menuNavegacionSeleccionadoId = menu.code;
        this.menuNavegacionSeleccionado.emit(menu);
        this.mostrarMenuNavegacionMovil = false;
    }
    dropdownMenuNavegacionSeleccionar(menu) {
        if (this.menuDropdownActivo !== null && menu.code !== this.menuDropdownActivo.code) {
            this.menuDropdownActivo.extended = false;
        }
        this.menuNavegacionSeleccionadoId = menu.code;
        this.menuDropdownActivo = menu;
        menu.extended = !menu.extended;
    }
    eventoSubmenuDropdown(e, menu) {
        if (menu.click) {
            menu.click(e);
        }
        menu.extended = !menu.extended;
    }
    mostrarAlerta(alerta) {
        this.ocultarTodasLasAlertas();
        alerta.mostrar = true;
    }
    ocultarTodasLasAlertas() {
        this.alertas?.forEach((alerta) => {
            alerta.mostrar = false;
        });
    }
    ocultarAlerta = (alerta) => () => {
        alerta.mostrar = false;
    };
    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.0", ngImport: i0, type: NgxCfngCoreLayoutHeaderComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });
    static ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.2.0", type: NgxCfngCoreLayoutHeaderComponent, isStandalone: true, selector: "ngx-cfng-core-layout-header", inputs: { baseAssetsUrl: "baseAssetsUrl", aplicaciones: "aplicaciones", alertas: "alertas", usuario: "usuario", titulos: "titulos", menuNavegacion: "menuNavegacion", tipoMenu: "tipoMenu", menuNavegacionBotones: "menuNavegacionBotones", prefijoURL: "prefijoURL" }, outputs: { menuNavegacionSeleccionado: "menuNavegacionSeleccionado" }, ngImport: i0, template: "<div class=\"p-1 linea-superior\">\r\n  <div class=\"flex align-items-center justify-content-between\">\r\n    <div class=\"flex align-items-center\">\r\n      <button class=\"cursor-pointer border-round ml-1 md:ml-3 btn-mas-opciones\"\r\n        (click)=\"mostrarMasOpciones = !mostrarMasOpciones\">\r\n        <img [src]=\"baseAssetsUrl + '/icons/points.svg'\" alt=\"More Options\" class=\"w-full h-full\" />\r\n      </button>\r\n      <div class=\"hidden md:block text-primary pl-2\"> {{ titulos.superior ?? \"\" }} </div>\r\n    </div>\r\n    <div class=\"hidden lg:block pr-2\"> {{ titulos.fiscalia ?? \"\" }} </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"flex align-items-center py-1\">\r\n  <!--Ini-Logo-->\r\n  <div class=\"w-full\">\r\n    <div class=\"flex\">\r\n      <div class=\"md:pl-2 logo\">\r\n        <img [src]=\"baseAssetsUrl + '/images/mpfnBlack_2.webp'\" class=\"w-12rem sm:w-15rem\" alt=\"\" />\r\n      </div>\r\n      <div class=\"flex align-items-center\">\r\n        <!-- Se oculta el titulo en md -->\r\n        <div class=\"text-2xl font-bold text-primary titulo my-2 py-2 pl-2 hidden md:block ml-3\">\r\n          {{ titulos.principal ? titulos.principal : \"\" }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!--Fin-Logo-->\r\n\r\n  <!--Ini-Usuario-->\r\n  <div class=\"w-full py-1\">\r\n    <div class=\"flex justify-content-end align-items-center\">\r\n      <!--Ini - Iconos de Alertas -->\r\n      <div class=\"flex alerta mr-3 relative\">\r\n        @for (alerta of alertas; track $index) {\r\n        <button class=\"border-none cursor-pointer alerta__btn\" (click)=\"mostrarAlerta(alerta)\">\r\n          <img [src]=\"alerta.icono\" class=\"w-2rem\" alt=\"\" />\r\n          @if(alerta.cantidad){\r\n          <div class=\"alerta__numero\">{{ alerta.cantidad }}</div>\r\n          }\r\n        </button>\r\n        @if (alerta.mostrar && alerta.template) {\r\n        <ng-container *ngTemplateOutlet=\"alerta.template; context: { fn: ocultarAlerta(alerta) }\"></ng-container>\r\n        }\r\n        }\r\n      </div>\r\n      <!--Fin - Iconos de Alertas -->\r\n\r\n      <div class=\"flex align-items-center usuario\">\r\n        <div class=\"usuario__foto border-round-lg\">\r\n          @if (usuario.nombres) {\r\n          <div class=\"font-bold text-primary text-lg text-center mt-2\">\r\n            {{ usuario.nombres.charAt(0) }}\r\n          </div>\r\n          }\r\n        </div>\r\n        <div class=\"px-2 text-primary text-sm hidden md:block\">\r\n          <!--Se oculara en md -->\r\n          <div class=\"font-bold\">\r\n            {{ usuario.nombres ? usuario.nombres : \"\" }}\r\n          </div>\r\n          <div>{{ usuario.perfil ? usuario.perfil : \"\" }}</div>\r\n        </div>\r\n        <div class=\"px-2\">\r\n          @if (usuario.opciones) {\r\n          <img [src]=\"baseAssetsUrl + '/icons/downrow.svg'\" alt=\"Ver opciones de usuario\" class=\"cursor-pointer w-1rem\"\r\n            (click)=\"usuarioMenu.toggle($event)\" />\r\n          <p-menu #usuarioMenu [model]=\"usuario.opciones\" [popup]=\"true\"></p-menu>\r\n          }\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!--Fin-Usuario-->\r\n</div>\r\n\r\n@if(menuNavegacion.length === 0) {\r\n\r\n<!--Ini-Linea Azul-->\r\n<div class=\"linea-inferior\"></div>\r\n<!--Fin-Linea Azul-->\r\n\r\n}@else{\r\n<!--Ini-Menu Opciones-->\r\n<div class=\"lg:flex lg:align-items-center lg:flex-wrap menu-navegacion\">\r\n\r\n  <div (click)=\"eventoMenuNavegacionMovilMostrar()\"\r\n    class=\"lg:hidden block py-3 pr-3 cursor-pointer text-right menu-navegacion__toggle\">\r\n    <i [ngClass]=\"{ '-rotate-90': mostrarMenuNavegacionMovil }\" class=\"pi pi-bars -rotate-90\"></i>\r\n  </div>\r\n\r\n  <div [class.hidden]=\"!mostrarMenuNavegacionMovil\"\r\n    class=\"menu-navegacion__contenido lg:flex lg:align-items-center lg:pl-3\"\r\n    [ngClass]=\"{ 'menu-navegacion__contenido--ancho-version': tipoMenu === TipoMenuNavegacion.Sidebar, 'w-full': tipoMenu === TipoMenuNavegacion.Dropdown}\">\r\n    @for (tab of menuNavegacion; track $index) {\r\n    <a class=\"flex align-items-center cursor-pointer px-3 py-3 lg:py-3 text-md lg:text-lg relative menu-navegacion__opcion\"\r\n      routerLink=\"{{ tab.url === '' ? location.path() : tab.url }}\" routerLinkActive=\"menu-navegacion__opcion--activo\"\r\n      (click)=\"eventoMenuNavegacionSeleccionar($event, tab)\">\r\n      @if (tab.icon) {\r\n      <img [src]=\"tab.icon\" alt=\"{{ tab.name }} Icon\" class=\"pr-2\" style=\"height: 1.7rem; margin-bottom: 0.2rem\" />\r\n      }\r\n      {{ tab.name }}\r\n      @if (tab.count && tab.count > 0) {\r\n      <span class=\"menu-navegacion__numero flex align-items-center justify-content-center ml-2 border-round\">{{\r\n        tab.count }}</span>\r\n      }\r\n      <!-- Ini - Menu Dropdown -->\r\n      @if (tipoMenu === TipoMenuNavegacion.Dropdown) {\r\n      @if (menuNavegacionSeleccionadoId===tab.code) {\r\n      <i class=\"pi pi-sort-up-fill absolute bottom-0 left-50 hidden lg:block\" style=\"opacity: 0.6\"></i>\r\n      } @if (tab.options && tab.options.length > 0) {\r\n      <i class=\"pl-2 pi\" style=\"margin-left: auto\" [class.pi-chevron-down]=\"!tab.extended\"\r\n        [class.pi-chevron-up]=\"tab.extended\"></i>\r\n      @if (tab.extended===true) {\r\n      <ul class=\"absolute left-0 p-0 m-0 bg-white w-full lg:w-18rem lg:border-round-lg menu-navegacion__submenu\">\r\n        @for (item of tab.options; track $index) {\r\n        <li class=\"p-0 m-0\">\r\n          <a routerLink=\"{{ item.url }}\" (click)=\"eventoSubmenuNavegacion($event, tab)\" class=\"block\">{{ item.name\r\n            }}</a>\r\n        </li>\r\n        }\r\n      </ul>\r\n      }\r\n      }\r\n      }\r\n      <!-- Fin - Menu Dropdown -->\r\n    </a>\r\n    }\r\n\r\n    <!--Ini - Menu Botones -->\r\n    @if (tipoMenu === TipoMenuNavegacion.Dropdown && menuNavegacionBotones.length > 0) {\r\n    <div style=\"margin-left: auto\" class=\"flex\">\r\n      @for (item of menuNavegacionBotones; track $index) {\r\n      <button class=\"relative w-full lg:w-auto justify-content-start mx-2 {{item.styleClass ? item.styleClass : ''}}\"\r\n        (click)=\"eventoSubmenuDropdown($event, item)\" [attr.disabled]=\"item.disabled === true ? true : null\">\r\n        @if(item.icon && item.icon!==''){\r\n        <img [src]=\"item.icon\" alt=\"Icono {{ item.name }}\" class=\"cursor-pointer pr-1\" style=\"height: 1.5rem\" />\r\n        }\r\n        {{ item.name }}\r\n        @if (item.options && item.options.length > 0) {\r\n        <i class=\"pl-2 pi\" style=\"margin-left: auto\" [class.pi-chevron-down]=\"!item.extended\"\r\n          [class.pi-chevron-up]=\"item.extended\"></i>\r\n\r\n        @if (item.extended===true) {\r\n        <ul\r\n          class=\"absolute right-0 p-0 m-0 bg-white w-full lg:w-15rem lg:border-round-lg text-left menu-navegacion__submenu\">\r\n          @for (item of item.options; track $index) {\r\n          <li class=\"p-0 m-0\">\r\n            <a routerLink=\"{{ item.url }}\" (click)=\"item.extended = false\" class=\"block\">{{ item.name }}</a>\r\n          </li>\r\n          }\r\n        </ul>\r\n        }\r\n        }\r\n      </button>\r\n      }\r\n    </div>\r\n    }\r\n    <!--Fin - Menu Botones -->\r\n  </div>\r\n\r\n  @if (tipoMenu === TipoMenuNavegacion.Sidebar) {\r\n  <div class=\"hidden lg:block menu-navegacion__version\">\r\n    Versi\u00F3n {{ version }}\r\n  </div>\r\n  }\r\n</div>\r\n<!--Fin-Menu Opciones-->\r\n}\r\n\r\n<!--Ini - M\u00E1s Opciones Modal -->\r\n@if (mostrarMasOpciones===true) {\r\n<div class=\"absolute bg-white border-round-xl aplicaciones z-5\">\r\n  <img [src]=\"baseAssetsUrl + '/icons/close.svg'\" class=\"absolute cursor-pointer aplicaciones__cerrar\"\r\n    (click)=\"mostrarMasOpciones = false\" alt=\"img\" />\r\n  <div class=\"text-2xl text-primary px-3 py-3\">Carpeta Fiscal Electr\u00F3nico</div>\r\n  <div class=\"grid grid-nogutter aplicaciones__opciones\">\r\n    @for (aplicacion of aplicaciones; track $index) {\r\n    <div class=\"col-12 sm:col-6 aplicaciones__opcion\">\r\n      <a href=\"{{ aplicacion.url }}\" class=\"block w-full aplicaciones__vinculo\">{{ aplicacion.sistema | titlecase }}</a>\r\n    </div>\r\n    }\r\n  </div>\r\n</div>\r\n}\r\n<!--Fin - M\u00E1s Opciones Modal -->", styles: [".linea-superior{background-color:var(--mpfn-background-opaque)}.titulo{border-left:4px solid var(--primary-color)}.linea-inferior{background-color:var(--primary-color);height:.5rem}.btn-mas-opciones{border:1px solid var(--mpfn-gray2);padding:.3rem;width:2rem;height:2rem}.aplicaciones{top:2.2rem;left:0;width:100%;box-shadow:10px 10px 86px -22px var(--mpfn-black);-webkit-box-shadow:10px 10px 86px -22px var(--mpfn-black);-moz-box-shadow:10px 10px 86px -22px var(--mpfn-black);font-family:var(--mpfn-font-regular);overflow:hidden}.aplicaciones__opciones{border-top:1px solid var(--mpfn-gray3)}.aplicaciones__opcion{border-bottom:1px solid var(--mpfn-gray3);border-right:1px solid var(--mpfn-gray3)}.aplicaciones__vinculo{padding:.7rem .9rem}.aplicaciones__vinculo:hover{background-color:var(--mpfn-background)}.aplicaciones__cerrar{right:.7rem;top:.5rem;width:1.2rem}.usuario{padding-right:.5rem}.usuario__foto{background-color:#d8d8d8;width:2.6rem;height:2.6rem}@media (min-width: 768px){.aplicaciones{width:39rem;left:1.6rem}}.menu-navegacion{background-color:var(--primary-color);color:var(--mpfn-white)}.menu-navegacion__toggle i{transition:all .5s ease;color:var(--mpfn-white);font-size:22px}.menu-navegacion__contenido{transition:all .5s}.menu-navegacion__contenido--ancho-version{width:calc(100% - var(--version-width))}.menu-navegacion__opcion{font-family:var(--mpfn-font-light);text-decoration:none;color:var(--mpfn-white)}.menu-navegacion__opcion:hover,.menu-navegacion__opcion--activo{background-color:var(--mpfn-blue-hover)}.menu-navegacion__numero{font-family:var(--mpfn-font-semi-bold);color:var(--mpfn-white);background-color:var(--mpfn-secondary);font-size:.9rem;width:1.375rem;height:1.375rem}.menu-navegacion__version{width:var(--version-width);font-size:1em;font-family:var(--mpfn-font-regular);color:var(--mpfn-gray4)}.alerta__btn{background-color:transparent;position:relative}.alerta__btn:hover{opacity:.8}.alerta__numero{border-radius:50%;background-color:#f19700;color:#fff;width:1.2rem;height:1.3rem;font-size:.7rem;font-weight:700;text-align:center;position:absolute;top:-5px;left:26px;line-height:1.3rem}.menu-navegacion__submenu{top:calc(100% + .3rem);border:1px solid var(--mpfn-gray7);z-index:10;overflow:hidden}.menu-navegacion__submenu li{list-style:none}.menu-navegacion__submenu li a{font-size:1rem;padding:.6rem 1rem;border-bottom:1px solid var(--mpfn-gray7)}.menu-navegacion__submenu li a:hover{background-color:var(--mpfn-gray8)}.menu-navegacion__submenu li:last-child a{border-bottom:none}@media (max-width: 992px){.menu-navegacion__contenido--ancho-version{width:100%}}@media (max-width: 576px){.logo{display:none}}\n"], dependencies: [{ kind: "ngmodule", type: MenuModule }, { kind: "component", type: i1.Menu, selector: "p-menu", inputs: ["model", "popup", "style", "styleClass", "appendTo", "autoZIndex", "baseZIndex", "showTransitionOptions", "hideTransitionOptions", "ariaLabel", "ariaLabelledBy", "id", "tabindex"], outputs: ["onShow", "onHide", "onBlur", "onFocus"] }, { kind: "directive", type: i2.RouterLink, selector: "[routerLink]", inputs: ["target", "queryParams", "fragment", "queryParamsHandling", "state", "info", "relativeTo", "preserveFragment", "skipLocationChange", "replaceUrl", "routerLink"] }, { kind: "directive", type: i2.RouterLinkActive, selector: "[routerLinkActive]", inputs: ["routerLinkActiveOptions", "ariaCurrentWhenActive", "routerLinkActive"], outputs: ["isActiveChange"], exportAs: ["routerLinkActive"] }, { kind: "directive", type: NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "ngmodule", type: CommonModule }, { kind: "directive", type: i3.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "pipe", type: i3.TitleCasePipe, name: "titlecase" }] });
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.0", ngImport: i0, type: NgxCfngCoreLayoutHeaderComponent, decorators: [{
            type: Component,
            args: [{ selector: 'ngx-cfng-core-layout-header', standalone: true, imports: [
                        MenuModule,
                        NgClass,
                        RouterLink,
                        RouterLinkActive,
                        CommonModule,
                        TitleCasePipe
                    ], template: "<div class=\"p-1 linea-superior\">\r\n  <div class=\"flex align-items-center justify-content-between\">\r\n    <div class=\"flex align-items-center\">\r\n      <button class=\"cursor-pointer border-round ml-1 md:ml-3 btn-mas-opciones\"\r\n        (click)=\"mostrarMasOpciones = !mostrarMasOpciones\">\r\n        <img [src]=\"baseAssetsUrl + '/icons/points.svg'\" alt=\"More Options\" class=\"w-full h-full\" />\r\n      </button>\r\n      <div class=\"hidden md:block text-primary pl-2\"> {{ titulos.superior ?? \"\" }} </div>\r\n    </div>\r\n    <div class=\"hidden lg:block pr-2\"> {{ titulos.fiscalia ?? \"\" }} </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"flex align-items-center py-1\">\r\n  <!--Ini-Logo-->\r\n  <div class=\"w-full\">\r\n    <div class=\"flex\">\r\n      <div class=\"md:pl-2 logo\">\r\n        <img [src]=\"baseAssetsUrl + '/images/mpfnBlack_2.webp'\" class=\"w-12rem sm:w-15rem\" alt=\"\" />\r\n      </div>\r\n      <div class=\"flex align-items-center\">\r\n        <!-- Se oculta el titulo en md -->\r\n        <div class=\"text-2xl font-bold text-primary titulo my-2 py-2 pl-2 hidden md:block ml-3\">\r\n          {{ titulos.principal ? titulos.principal : \"\" }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!--Fin-Logo-->\r\n\r\n  <!--Ini-Usuario-->\r\n  <div class=\"w-full py-1\">\r\n    <div class=\"flex justify-content-end align-items-center\">\r\n      <!--Ini - Iconos de Alertas -->\r\n      <div class=\"flex alerta mr-3 relative\">\r\n        @for (alerta of alertas; track $index) {\r\n        <button class=\"border-none cursor-pointer alerta__btn\" (click)=\"mostrarAlerta(alerta)\">\r\n          <img [src]=\"alerta.icono\" class=\"w-2rem\" alt=\"\" />\r\n          @if(alerta.cantidad){\r\n          <div class=\"alerta__numero\">{{ alerta.cantidad }}</div>\r\n          }\r\n        </button>\r\n        @if (alerta.mostrar && alerta.template) {\r\n        <ng-container *ngTemplateOutlet=\"alerta.template; context: { fn: ocultarAlerta(alerta) }\"></ng-container>\r\n        }\r\n        }\r\n      </div>\r\n      <!--Fin - Iconos de Alertas -->\r\n\r\n      <div class=\"flex align-items-center usuario\">\r\n        <div class=\"usuario__foto border-round-lg\">\r\n          @if (usuario.nombres) {\r\n          <div class=\"font-bold text-primary text-lg text-center mt-2\">\r\n            {{ usuario.nombres.charAt(0) }}\r\n          </div>\r\n          }\r\n        </div>\r\n        <div class=\"px-2 text-primary text-sm hidden md:block\">\r\n          <!--Se oculara en md -->\r\n          <div class=\"font-bold\">\r\n            {{ usuario.nombres ? usuario.nombres : \"\" }}\r\n          </div>\r\n          <div>{{ usuario.perfil ? usuario.perfil : \"\" }}</div>\r\n        </div>\r\n        <div class=\"px-2\">\r\n          @if (usuario.opciones) {\r\n          <img [src]=\"baseAssetsUrl + '/icons/downrow.svg'\" alt=\"Ver opciones de usuario\" class=\"cursor-pointer w-1rem\"\r\n            (click)=\"usuarioMenu.toggle($event)\" />\r\n          <p-menu #usuarioMenu [model]=\"usuario.opciones\" [popup]=\"true\"></p-menu>\r\n          }\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!--Fin-Usuario-->\r\n</div>\r\n\r\n@if(menuNavegacion.length === 0) {\r\n\r\n<!--Ini-Linea Azul-->\r\n<div class=\"linea-inferior\"></div>\r\n<!--Fin-Linea Azul-->\r\n\r\n}@else{\r\n<!--Ini-Menu Opciones-->\r\n<div class=\"lg:flex lg:align-items-center lg:flex-wrap menu-navegacion\">\r\n\r\n  <div (click)=\"eventoMenuNavegacionMovilMostrar()\"\r\n    class=\"lg:hidden block py-3 pr-3 cursor-pointer text-right menu-navegacion__toggle\">\r\n    <i [ngClass]=\"{ '-rotate-90': mostrarMenuNavegacionMovil }\" class=\"pi pi-bars -rotate-90\"></i>\r\n  </div>\r\n\r\n  <div [class.hidden]=\"!mostrarMenuNavegacionMovil\"\r\n    class=\"menu-navegacion__contenido lg:flex lg:align-items-center lg:pl-3\"\r\n    [ngClass]=\"{ 'menu-navegacion__contenido--ancho-version': tipoMenu === TipoMenuNavegacion.Sidebar, 'w-full': tipoMenu === TipoMenuNavegacion.Dropdown}\">\r\n    @for (tab of menuNavegacion; track $index) {\r\n    <a class=\"flex align-items-center cursor-pointer px-3 py-3 lg:py-3 text-md lg:text-lg relative menu-navegacion__opcion\"\r\n      routerLink=\"{{ tab.url === '' ? location.path() : tab.url }}\" routerLinkActive=\"menu-navegacion__opcion--activo\"\r\n      (click)=\"eventoMenuNavegacionSeleccionar($event, tab)\">\r\n      @if (tab.icon) {\r\n      <img [src]=\"tab.icon\" alt=\"{{ tab.name }} Icon\" class=\"pr-2\" style=\"height: 1.7rem; margin-bottom: 0.2rem\" />\r\n      }\r\n      {{ tab.name }}\r\n      @if (tab.count && tab.count > 0) {\r\n      <span class=\"menu-navegacion__numero flex align-items-center justify-content-center ml-2 border-round\">{{\r\n        tab.count }}</span>\r\n      }\r\n      <!-- Ini - Menu Dropdown -->\r\n      @if (tipoMenu === TipoMenuNavegacion.Dropdown) {\r\n      @if (menuNavegacionSeleccionadoId===tab.code) {\r\n      <i class=\"pi pi-sort-up-fill absolute bottom-0 left-50 hidden lg:block\" style=\"opacity: 0.6\"></i>\r\n      } @if (tab.options && tab.options.length > 0) {\r\n      <i class=\"pl-2 pi\" style=\"margin-left: auto\" [class.pi-chevron-down]=\"!tab.extended\"\r\n        [class.pi-chevron-up]=\"tab.extended\"></i>\r\n      @if (tab.extended===true) {\r\n      <ul class=\"absolute left-0 p-0 m-0 bg-white w-full lg:w-18rem lg:border-round-lg menu-navegacion__submenu\">\r\n        @for (item of tab.options; track $index) {\r\n        <li class=\"p-0 m-0\">\r\n          <a routerLink=\"{{ item.url }}\" (click)=\"eventoSubmenuNavegacion($event, tab)\" class=\"block\">{{ item.name\r\n            }}</a>\r\n        </li>\r\n        }\r\n      </ul>\r\n      }\r\n      }\r\n      }\r\n      <!-- Fin - Menu Dropdown -->\r\n    </a>\r\n    }\r\n\r\n    <!--Ini - Menu Botones -->\r\n    @if (tipoMenu === TipoMenuNavegacion.Dropdown && menuNavegacionBotones.length > 0) {\r\n    <div style=\"margin-left: auto\" class=\"flex\">\r\n      @for (item of menuNavegacionBotones; track $index) {\r\n      <button class=\"relative w-full lg:w-auto justify-content-start mx-2 {{item.styleClass ? item.styleClass : ''}}\"\r\n        (click)=\"eventoSubmenuDropdown($event, item)\" [attr.disabled]=\"item.disabled === true ? true : null\">\r\n        @if(item.icon && item.icon!==''){\r\n        <img [src]=\"item.icon\" alt=\"Icono {{ item.name }}\" class=\"cursor-pointer pr-1\" style=\"height: 1.5rem\" />\r\n        }\r\n        {{ item.name }}\r\n        @if (item.options && item.options.length > 0) {\r\n        <i class=\"pl-2 pi\" style=\"margin-left: auto\" [class.pi-chevron-down]=\"!item.extended\"\r\n          [class.pi-chevron-up]=\"item.extended\"></i>\r\n\r\n        @if (item.extended===true) {\r\n        <ul\r\n          class=\"absolute right-0 p-0 m-0 bg-white w-full lg:w-15rem lg:border-round-lg text-left menu-navegacion__submenu\">\r\n          @for (item of item.options; track $index) {\r\n          <li class=\"p-0 m-0\">\r\n            <a routerLink=\"{{ item.url }}\" (click)=\"item.extended = false\" class=\"block\">{{ item.name }}</a>\r\n          </li>\r\n          }\r\n        </ul>\r\n        }\r\n        }\r\n      </button>\r\n      }\r\n    </div>\r\n    }\r\n    <!--Fin - Menu Botones -->\r\n  </div>\r\n\r\n  @if (tipoMenu === TipoMenuNavegacion.Sidebar) {\r\n  <div class=\"hidden lg:block menu-navegacion__version\">\r\n    Versi\u00F3n {{ version }}\r\n  </div>\r\n  }\r\n</div>\r\n<!--Fin-Menu Opciones-->\r\n}\r\n\r\n<!--Ini - M\u00E1s Opciones Modal -->\r\n@if (mostrarMasOpciones===true) {\r\n<div class=\"absolute bg-white border-round-xl aplicaciones z-5\">\r\n  <img [src]=\"baseAssetsUrl + '/icons/close.svg'\" class=\"absolute cursor-pointer aplicaciones__cerrar\"\r\n    (click)=\"mostrarMasOpciones = false\" alt=\"img\" />\r\n  <div class=\"text-2xl text-primary px-3 py-3\">Carpeta Fiscal Electr\u00F3nico</div>\r\n  <div class=\"grid grid-nogutter aplicaciones__opciones\">\r\n    @for (aplicacion of aplicaciones; track $index) {\r\n    <div class=\"col-12 sm:col-6 aplicaciones__opcion\">\r\n      <a href=\"{{ aplicacion.url }}\" class=\"block w-full aplicaciones__vinculo\">{{ aplicacion.sistema | titlecase }}</a>\r\n    </div>\r\n    }\r\n  </div>\r\n</div>\r\n}\r\n<!--Fin - M\u00E1s Opciones Modal -->", styles: [".linea-superior{background-color:var(--mpfn-background-opaque)}.titulo{border-left:4px solid var(--primary-color)}.linea-inferior{background-color:var(--primary-color);height:.5rem}.btn-mas-opciones{border:1px solid var(--mpfn-gray2);padding:.3rem;width:2rem;height:2rem}.aplicaciones{top:2.2rem;left:0;width:100%;box-shadow:10px 10px 86px -22px var(--mpfn-black);-webkit-box-shadow:10px 10px 86px -22px var(--mpfn-black);-moz-box-shadow:10px 10px 86px -22px var(--mpfn-black);font-family:var(--mpfn-font-regular);overflow:hidden}.aplicaciones__opciones{border-top:1px solid var(--mpfn-gray3)}.aplicaciones__opcion{border-bottom:1px solid var(--mpfn-gray3);border-right:1px solid var(--mpfn-gray3)}.aplicaciones__vinculo{padding:.7rem .9rem}.aplicaciones__vinculo:hover{background-color:var(--mpfn-background)}.aplicaciones__cerrar{right:.7rem;top:.5rem;width:1.2rem}.usuario{padding-right:.5rem}.usuario__foto{background-color:#d8d8d8;width:2.6rem;height:2.6rem}@media (min-width: 768px){.aplicaciones{width:39rem;left:1.6rem}}.menu-navegacion{background-color:var(--primary-color);color:var(--mpfn-white)}.menu-navegacion__toggle i{transition:all .5s ease;color:var(--mpfn-white);font-size:22px}.menu-navegacion__contenido{transition:all .5s}.menu-navegacion__contenido--ancho-version{width:calc(100% - var(--version-width))}.menu-navegacion__opcion{font-family:var(--mpfn-font-light);text-decoration:none;color:var(--mpfn-white)}.menu-navegacion__opcion:hover,.menu-navegacion__opcion--activo{background-color:var(--mpfn-blue-hover)}.menu-navegacion__numero{font-family:var(--mpfn-font-semi-bold);color:var(--mpfn-white);background-color:var(--mpfn-secondary);font-size:.9rem;width:1.375rem;height:1.375rem}.menu-navegacion__version{width:var(--version-width);font-size:1em;font-family:var(--mpfn-font-regular);color:var(--mpfn-gray4)}.alerta__btn{background-color:transparent;position:relative}.alerta__btn:hover{opacity:.8}.alerta__numero{border-radius:50%;background-color:#f19700;color:#fff;width:1.2rem;height:1.3rem;font-size:.7rem;font-weight:700;text-align:center;position:absolute;top:-5px;left:26px;line-height:1.3rem}.menu-navegacion__submenu{top:calc(100% + .3rem);border:1px solid var(--mpfn-gray7);z-index:10;overflow:hidden}.menu-navegacion__submenu li{list-style:none}.menu-navegacion__submenu li a{font-size:1rem;padding:.6rem 1rem;border-bottom:1px solid var(--mpfn-gray7)}.menu-navegacion__submenu li a:hover{background-color:var(--mpfn-gray8)}.menu-navegacion__submenu li:last-child a{border-bottom:none}@media (max-width: 992px){.menu-navegacion__contenido--ancho-version{width:100%}}@media (max-width: 576px){.logo{display:none}}\n"] }]
        }], propDecorators: { baseAssetsUrl: [{
                type: Input,
                args: [{ required: true }]
            }], aplicaciones: [{
                type: Input
            }], alertas: [{
                type: Input
            }], usuario: [{
                type: Input
            }], titulos: [{
                type: Input
            }], menuNavegacion: [{
                type: Input
            }], tipoMenu: [{
                type: Input
            }], menuNavegacionBotones: [{
                type: Input
            }], prefijoURL: [{
                type: Input
            }], menuNavegacionSeleccionado: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVhZGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL25neC1jZm5nLWNvcmUtbGF5b3V0L2hlYWRlci9zcmMvbGliL2NvbXBvbmVudHMvaGVhZGVyLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL25neC1jZm5nLWNvcmUtbGF5b3V0L2hlYWRlci9zcmMvbGliL2NvbXBvbmVudHMvaGVhZGVyLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxZQUFZLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUNqRixPQUFPLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQVUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN2RixPQUFPLEVBQUUsVUFBVSxFQUFFLGdCQUFnQixFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDL0QsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGNBQWMsQ0FBQztBQUMxQyxPQUFPLEVBQWdFLGtCQUFrQixFQUFvQixNQUFNLCtCQUErQixDQUFDO0FBQ25KLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQzs7Ozs7QUFpQjNELE1BQU0sT0FBTyxnQ0FBZ0M7SUFFcEMsYUFBYSxHQUFXLEVBQUUsQ0FBQztJQUczQixZQUFZLEdBQW1CLEVBQUUsQ0FBQztJQUdsQyxPQUFPLEdBQWUsRUFBRSxDQUFDO0lBR3pCLE9BQU8sR0FBWSxFQUFhLENBQUM7SUFHakMsT0FBTyxHQUFZLEVBQWEsQ0FBQztJQUdqQyxjQUFjLEdBQXFCLEVBQUUsQ0FBQztJQUd0QyxRQUFRLEdBQXVCLGtCQUFrQixDQUFDLE9BQU8sQ0FBQztJQUcxRCxxQkFBcUIsR0FBNEIsRUFBRSxDQUFDO0lBR3BELFVBQVUsR0FBVyxPQUFP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QUFLO2dCQUlDLDBCQUEwQjtzQkFEaEMsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbW1vbk1vZHVsZSwgTG9jYXRpb24sIE5nQ2xhc3MsIFRpdGxlQ2FzZVBpcGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5pbXBvcnQgeyBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uSW5pdCwgT3V0cHV0LCBpbmplY3QgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgUm91dGVyTGluaywgUm91dGVyTGlua0FjdGl2ZSB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XHJcbmltcG9ydCB7IE1lbnVNb2R1bGUgfSBmcm9tICdwcmltZW5nL21lbnUnO1xyXG5pbXBvcnQgeyBBbGVydGFzLCBBcGxpY2FjaW9uZXMsIE1lbnVOYXZlZ2FjaW9uLCBNZW51TmF2ZWdhY2lvbkJvdG9uZXMsIFRpcG9NZW51TmF2ZWdhY2lvbiwgVGl0dWxvcywgVXN1YXJpbyB9IGZyb20gJy4uL21vZGVscy9jb25maWd1cmFjaW9uLm1vZGVsJztcclxuaW1wb3J0IHsgSGVhZGVyU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2hlYWRlci5zZXJ2aWNlJztcclxuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ25neC1jZm5nLWNvcmUtbGF5b3V0LWhlYWRlcicsXHJcbiAgc3RhbmRhbG9uZTogdHJ1ZSxcclxuICBpbXBvcnRzOiBbXHJcbiAgICBNZW51TW9kdWxlLFxyXG4gICAgTmdDbGFzcyxcclxuICAgIFJvdXRlckxpbmssXHJcbiAgICBSb3V0ZXJMaW5rQWN0aXZlLFxyXG4gICAgQ29tbW9uTW9kdWxlLFxyXG4gICAgVGl0bGVDYXNlUGlwZVxyXG4gIF0sXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2hlYWRlci5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmw6ICcuL2hlYWRlci5jb21wb25lbnQuc2NzcycsXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBOZ3hDZm5nQ29yZUxheW91dEhlYWRlckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcbiAgQElucHV0KHsgcmVxdWlyZWQ6IHRydWUgfSlcclxuICBwdWJsaWMgYmFzZUFzc2V0c1VybDogc3RyaW5nID0gJyc7XHJcblxyXG4gIEBJbnB1dCgpXHJcbiAgcHVibGljIGFwbGljYWNpb25lczogQXBsaWNhY2lvbmVzW10gPSBbXTtcclxuXHJcbiAgQElucHV0KClcclxuICBwdWJsaWMgYWxlcnRhcz86IEFsZXJ0YXNbXSA9IFtdO1xyXG5cclxuICBASW5wdXQoKVxyXG4gIHB1YmxpYyB1c3VhcmlvOiBVc3VhcmlvID0ge30gYXMgVXN1YXJpbztcclxuXHJcbiAgQElucHV0KClcclxuICBwdWJsaWMgdGl0dWxvczogVGl0dWxvcyA9IHt9IGFzIFRpdHVsb3M7XHJcblxyXG4gIEBJbnB1dCgpXHJcbiAgcHVibGljIG1lbnVOYXZlZ2FjaW9uOiBNZW51TmF2ZWdhY2lvbltdID0gW107XHJcblxyXG4gIEBJbnB1dCgpXHJcbiAgcHVibGljIHRpcG9NZW51OiBUaXBvTWVudU5hdmVnYWNpb24gPSBUaXBvTWVudU5hdmVnYWNpb24uU2lkZWJhcjtcclxuXHJcbiAgQElucHV0KClcclxuICBwdWJsaWMgbWVudU5hdmVnYWNpb25Cb3RvbmVzOiBNZW51TmF2ZWdhY2lvbkJvdG9uZXNbXSA9IFtdO1xyXG5cclxuICBASW5wdXQoKVxyXG4gIHB1YmxpYyBwcmVmaWpvVVJMOiBzdHJpbmcgPSAnL2FwcC8nOyAvLycvbGF5b3V0L2xheW91dC9lZmUvJyAvYXBwL1xyXG5cclxuICBAT3V0cHV0KClcclxuICBwdWJsaWMgbWVudU5hdmVnYWNpb25TZWxlY2Npb25hZG8gPSBuZXcgRXZlbnRFbWl0dGVyPE1lbnVOYXZlZ2FjaW9uPigpO1xyXG5cclxuICBwcm90ZWN0ZWQgbW9zdHJhck1hc09wY2lvbmVzOiBib29sZWFuID0gZmFsc2U7XHJcbiAgcHJvdGVjdGVkIG1vc3RyYXJNZW51TmF2ZWdhY2lvbk1vdmlsOiBib29sZWFuID0gZmFsc2U7XHJcbiAgcHJvdGVjdGVkIHZlcnNpb24gPSAnMC4wLjEnO1xyXG4gIC8vcHJpdmF0ZSBzZXNzaW9uTWVudUlkID0gJ21wZU1uUHInOy8vVXNhZG8gcGFyYSBhbG1hY2VuYXIgZWwgbWVudSBzZWxlY2Npb25hZG9cclxuICBwcm90ZWN0ZWQgbWVudU5hdmVnYWNpb25TZWxlY2Npb25hZG9JZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcbiAgcHJvdGVjdGVkIFRpcG9NZW51TmF2ZWdhY2lvbiA9IFRpcG9NZW51TmF2ZWdhY2lvbjtcclxuICBwcm90ZWN0ZWQgbG9jYXRpb246IExvY2F0aW9uID0gaW5qZWN0KExvY2F0aW9uKTtcclxuICBwcml2YXRlIHJlYWRvbmx5IGhlYWRlclNlcnZpY2U6IEhlYWRlclNlcnZpY2UgPSBpbmplY3QoSGVhZGVyU2VydmljZSk7XHJcbiAgcHJpdmF0ZSBtZW51RHJvcGRvd25BY3Rpdm86IE1lbnVOYXZlZ2FjaW9uIHwgbnVsbCA9IG51bGw7XHJcbiAgcHJpdmF0ZSBzdWJzY3JpcHRpb24hOiBTdWJzY3JpcHRpb25cclxuXHJcbiAgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLmNhcmdhck1lbnVJbmljaWFsKClcclxuICAgIHRoaXMuc3Vic2NyaXB0aW9uID0gdGhpcy5oZWFkZXJTZXJ2aWNlLmFjdHVhbGl6YXJIZWFkZXIkLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2FyZ2FyTWVudUluaWNpYWwoKVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgY2FyZ2FyTWVudUluaWNpYWwoKTogdm9pZCB7XHJcbiAgICBjb25zdCBtZW51ID0gdGhpcy5oZWFkZXJTZXJ2aWNlLmdldE1lbnVBY3R1YWwodGhpcy5tZW51TmF2ZWdhY2lvbiwgdGhpcy5wcmVmaWpvVVJMKTtcclxuICAgIGlmIChtZW51KSB7XHJcbiAgICAgIHRoaXMuc2lkZWJhck1lbnVOYXZlZ2FjaW9uU2VsZWNjaW9uYXIobWVudSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgZXZlbnRvTWVudU5hdmVnYWNpb25Nb3ZpbE1vc3RyYXIoKSB7XHJcbiAgICB0aGlzLm1vc3RyYXJNZW51TmF2ZWdhY2lvbk1vdmlsID0gIXRoaXMubW9zdHJhck1lbnVOYXZlZ2FjaW9uTW92aWw7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZXZlbnRvTWVudU5hdmVnYWNpb25TZWxlY2Npb25hcihlOiBFdmVudCwgbWVudTogTWVudU5hdmVnYWNpb24pOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLnRpcG9NZW51ID09PSBUaXBvTWVudU5hdmVnYWNpb24uU2lkZWJhcikge1xyXG4gICAgICB0aGlzLnNpZGViYXJNZW51TmF2ZWdhY2lvblNlbGVjY2lvbmFyKG1lbnUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5kcm9wZG93bk1lbnVOYXZlZ2FjaW9uU2VsZWNjaW9uYXIobWVudSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgZXZlbnRvU3VibWVudU5hdmVnYWNpb24oZTogRXZlbnQsIG1lbnU6IE1lbnVOYXZlZ2FjaW9uKSB7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgbWVudS5leHRlbmRlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzaWRlYmFyTWVudU5hdmVnYWNpb25TZWxlY2Npb25hcihtZW51OiBNZW51TmF2ZWdhY2lvbikge1xyXG4gICAgdGhpcy5tZW51TmF2ZWdhY2lvblNlbGVjY2lvbmFkb0lkID0gbWVudS5jb2RlITtcclxuICAgIHRoaXMubWVudU5hdmVnYWNpb25TZWxlY2Npb25hZG8uZW1pdChtZW51KTtcclxuICAgIHRoaXMubW9zdHJhck1lbnVOYXZlZ2FjaW9uTW92aWwgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZHJvcGRvd25NZW51TmF2ZWdhY2lvblNlbGVjY2lvbmFyKG1lbnU6IE1lbnVOYXZlZ2FjaW9uKSB7XHJcbiAgICBpZiAodGhpcy5tZW51RHJvcGRvd25BY3Rpdm8gIT09IG51bGwgJiYgbWVudS5jb2RlICE9PSB0aGlzLm1lbnVEcm9wZG93bkFjdGl2by5jb2RlKSB7XHJcbiAgICAgIHRoaXMubWVudURyb3Bkb3duQWN0aXZvLmV4dGVuZGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICB0aGlzLm1lbnVOYXZlZ2FjaW9uU2VsZWNjaW9uYWRvSWQgPSBtZW51LmNvZGUhO1xyXG4gICAgdGhpcy5tZW51RHJvcGRvd25BY3Rpdm8gPSBtZW51O1xyXG4gICAgbWVudS5leHRlbmRlZCA9ICFtZW51LmV4dGVuZGVkO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIGV2ZW50b1N1Ym1lbnVEcm9wZG93bihlOiBFdmVudCwgbWVudTogTWVudU5hdmVnYWNpb25Cb3RvbmVzKSB7XHJcbiAgICBpZiAobWVudS5jbGljaykge1xyXG4gICAgICBtZW51LmNsaWNrKGUpO1xyXG4gICAgfVxyXG4gICAgbWVudS5leHRlbmRlZCA9ICFtZW51LmV4dGVuZGVkO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIG1vc3RyYXJBbGVydGEoYWxlcnRhOiBBbGVydGFzKSB7XHJcbiAgICB0aGlzLm9jdWx0YXJUb2Rhc0xhc0FsZXJ0YXMoKTtcclxuICAgIGFsZXJ0YS5tb3N0cmFyID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgb2N1bHRhclRvZGFzTGFzQWxlcnRhcygpIHtcclxuICAgIHRoaXMuYWxlcnRhcz8uZm9yRWFjaCgoYWxlcnRhKSA9PiB7XHJcbiAgICAgIGFsZXJ0YS5tb3N0cmFyID0gZmFsc2U7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBvY3VsdGFyQWxlcnRhID0gKGFsZXJ0YTogQWxlcnRhcykgPT4gKCkgPT4ge1xyXG4gICAgYWxlcnRhLm1vc3RyYXIgPSBmYWxzZTtcclxuICB9O1xyXG59XHJcbiIsIjxkaXYgY2xhc3M9XCJwLTEgbGluZWEtc3VwZXJpb3JcIj5cclxuICA8ZGl2IGNsYXNzPVwiZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIganVzdGlmeS1jb250ZW50LWJldHdlZW5cIj5cclxuICAgIDxkaXYgY2xhc3M9XCJmbGV4IGFsaWduLWl0ZW1zLWNlbnRlclwiPlxyXG4gICAgICA8YnV0dG9uIGNsYXNzPVwiY3Vyc29yLXBvaW50ZXIgYm9yZGVyLXJvdW5kIG1sLTEgbWQ6bWwtMyBidG4tbWFzLW9wY2lvbmVzXCJcclxuICAgICAgICAoY2xpY2spPVwibW9zdHJhck1hc09wY2lvbmVzID0gIW1vc3RyYXJNYXNPcGNpb25lc1wiPlxyXG4gICAgICAgIDxpbWcgW3NyY109XCJiYXNlQXNzZXRzVXJsICsgJy9pY29ucy9wb2ludHMuc3ZnJ1wiIGFsdD1cIk1vcmUgT3B0aW9uc1wiIGNsYXNzPVwidy1mdWxsIGgtZnVsbFwiIC8+XHJcbiAgICAgIDwvYnV0dG9uPlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiaGlkZGVuIG1kOmJsb2NrIHRleHQtcHJpbWFyeSBwbC0yXCI+IHt7IHRpdHVsb3Muc3VwZXJpb3IgPz8gXCJcIiB9fSA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICAgPGRpdiBjbGFzcz1cImhpZGRlbiBsZzpibG9jayBwci0yXCI+IHt7IHRpdHVsb3MuZmlzY2FsaWEgPz8gXCJcIiB9fSA8L2Rpdj5cclxuICA8L2Rpdj5cclxuPC9kaXY+XHJcblxyXG48ZGl2IGNsYXNzPVwiZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIgcHktMVwiPlxyXG4gIDwhLS1JbmktTG9nby0tPlxyXG4gIDxkaXYgY2xhc3M9XCJ3LWZ1bGxcIj5cclxuICAgIDxkaXYgY2xhc3M9XCJmbGV4XCI+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJtZDpwbC0yIGxvZ29cIj5cclxuICAgICAgICA8aW1nIFtzcmNdPVwiYmFzZUFzc2V0c1VybCArICcvaW1hZ2VzL21wZm5CbGFja18yLndlYnAnXCIgY2xhc3M9XCJ3LTEycmVtIHNtOnctMTVyZW1cIiBhbHQ9XCJcIiAvPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzcz1cImZsZXggYWxpZ24taXRlbXMtY2VudGVyXCI+XHJcbiAgICAgICAgPCEtLSBTZSBvY3VsdGEgZWwgdGl0dWxvIGVuIG1kIC0tPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgdGV4dC1wcmltYXJ5IHRpdHVsbyBteS0yIHB5LTIgcGwtMiBoaWRkZW4gbWQ6YmxvY2sgbWwtM1wiPlxyXG4gICAgICAgICAge3sgdGl0dWxvcy5wcmluY2lwYWwgPyB0aXR1bG9zLnByaW5jaXBhbCA6IFwiXCIgfX1cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICA8L2Rpdj5cclxuICA8IS0tRmluLUxvZ28tLT5cclxuXHJcbiAgPCEtLUluaS1Vc3VhcmlvLS0+XHJcbiAgPGRpdiBjbGFzcz1cInctZnVsbCBweS0xXCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwiZmxleCBqdXN0aWZ5LWNvbnRlbnQtZW5kIGFsaWduLWl0ZW1zLWNlbnRlclwiPlxyXG4gICAgICA8IS0tSW5pIC0gSWNvbm9zIGRlIEFsZXJ0YXMgLS0+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGFsZXJ0YSBtci0zIHJlbGF0aXZlXCI+XHJcbiAgICAgICAgQGZvciAoYWxlcnRhIG9mIGFsZXJ0YXM7IHRyYWNrICRpbmRleCkge1xyXG4gICAgICAgIDxidXR0b24gY2xhc3M9XCJib3JkZXItbm9uZSBjdXJzb3ItcG9pbnRlciBhbGVydGFfX2J0blwiIChjbGljayk9XCJtb3N0cmFyQWxlcnRhKGFsZXJ0YSlcIj5cclxuICAgICAgICAgIDxpbWcgW3NyY109XCJhbGVydGEuaWNvbm9cIiBjbGFzcz1cInctMnJlbVwiIGFsdD1cIlwiIC8+XHJcbiAgICAgICAgICBAaWYoYWxlcnRhLmNhbnRpZGFkKXtcclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJhbGVydGFfX251bWVyb1wiPnt7IGFsZXJ0YS5jYW50aWRhZCB9fTwvZGl2PlxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgIEBpZiAoYWxlcnRhLm1vc3RyYXIgJiYgYWxlcnRhLnRlbXBsYXRlKSB7XHJcbiAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cImFsZXJ0YS50ZW1wbGF0ZTsgY29udGV4dDogeyBmbjogb2N1bHRhckFsZXJ0YShhbGVydGEpIH1cIj48L25nLWNvbnRhaW5lcj5cclxuICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPCEtLUZpbiAtIEljb25vcyBkZSBBbGVydGFzIC0tPlxyXG5cclxuICAgICAgPGRpdiBjbGFzcz1cImZsZXggYWxpZ24taXRlbXMtY2VudGVyIHVzdWFyaW9cIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwidXN1YXJpb19fZm90byBib3JkZXItcm91bmQtbGdcIj5cclxuICAgICAgICAgIEBpZiAodXN1YXJpby5ub21icmVzKSB7XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9udC1ib2xkIHRleHQtcHJpbWFyeSB0ZXh0LWxnIHRleHQtY2VudGVyIG10LTJcIj5cclxuICAgICAgICAgICAge3sgdXN1YXJpby5ub21icmVzLmNoYXJBdCgwKSB9fVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInB4LTIgdGV4dC1wcmltYXJ5IHRleHQtc20gaGlkZGVuIG1kOmJsb2NrXCI+XHJcbiAgICAgICAgICA8IS0tU2Ugb2N1bGFyYSBlbiBtZCAtLT5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb250LWJvbGRcIj5cclxuICAgICAgICAgICAge3sgdXN1YXJpby5ub21icmVzID8gdXN1YXJpby5ub21icmVzIDogXCJcIiB9fVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2Pnt7IHVzdWFyaW8ucGVyZmlsID8gdXN1YXJpby5wZXJmaWwgOiBcIlwiIH19PC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInB4LTJcIj5cclxuICAgICAgICAgIEBpZiAodXN1YXJpby5vcGNpb25lcykge1xyXG4gICAgICAgICAgPGltZyBbc3JjXT1cImJhc2VBc3NldHNVcmwgKyAnL2ljb25zL2Rvd25yb3cuc3ZnJ1wiIGFsdD1cIlZlciBvcGNpb25lcyBkZSB1c3VhcmlvXCIgY2xhc3M9XCJjdXJzb3ItcG9pbnRlciB3LTFyZW1cIlxyXG4gICAgICAgICAgICAoY2xpY2spPVwidXN1YXJpb01lbnUudG9nZ2xlKCRldmVudClcIiAvPlxyXG4gICAgICAgICAgPHAtbWVudSAjdXN1YXJpb01lbnUgW21vZGVsXT1cInVzdWFyaW8ub3BjaW9uZXNcIiBbcG9wdXBdPVwidHJ1ZVwiPjwvcC1tZW51PlxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIDwvZGl2PlxyXG4gIDwhLS1GaW4tVXN1YXJpby0tPlxyXG48L2Rpdj5cclxuXHJcbkBpZihtZW51TmF2ZWdhY2lvbi5sZW5ndGggPT09IDApIHtcclxuXHJcbjwhLS1JbmktTGluZWEgQXp1bC0tPlxyXG48ZGl2IGNsYXNzPVwibGluZWEtaW5mZXJpb3JcIj48L2Rpdj5cclxuPCEtLUZpbi1MaW5lYSBBenVsLS0+XHJcblxyXG59QGVsc2V7XHJcbjwhLS1JbmktTWVudSBPcGNpb25lcy0tPlxyXG48ZGl2IGNsYXNzPVwibGc6ZmxleCBsZzphbGlnbi1pdGVtcy1jZW50ZXIgbGc6ZmxleC13cmFwIG1lbnUtbmF2ZWdhY2lvblwiPlxyXG5cclxuICA8ZGl2IChjbGljayk9XCJldmVudG9NZW51TmF2ZWdhY2lvbk1vdmlsTW9zdHJhcigpXCJcclxuICAgIGNsYXNzPVwibGc6aGlkZGVuIGJsb2NrIHB5LTMgcHItMyBjdXJzb3ItcG9pbnRlciB0ZXh0LXJpZ2h0IG1lbnUtbmF2ZWdhY2lvbl9fdG9nZ2xlXCI+XHJcbiAgICA8aSBbbmdDbGFzc109XCJ7ICctcm90YXRlLTkwJzogbW9zdHJhck1lbnVOYXZlZ2FjaW9uTW92aWwgfVwiIGNsYXNzPVwicGkgcGktYmFycyAtcm90YXRlLTkwXCI+PC9pPlxyXG4gIDwvZGl2PlxyXG5cclxuICA8ZGl2IFtjbGFzcy5oaWRkZW5dPVwiIW1vc3RyYXJNZW51TmF2ZWdhY2lvbk1vdmlsXCJcclxuICAgIGNsYXNzPVwibWVudS1uYXZlZ2FjaW9uX19jb250ZW5pZG8gbGc6ZmxleCBsZzphbGlnbi1pdGVtcy1jZW50ZXIgbGc6cGwtM1wiXHJcbiAgICBbbmdDbGFzc109XCJ7ICdtZW51LW5hdmVnYWNpb25fX2NvbnRlbmlkby0tYW5jaG8tdmVyc2lvbic6IHRpcG9NZW51ID09PSBUaXBvTWVudU5hdmVnYWNpb24uU2lkZWJhciwgJ3ctZnVsbCc6IHRpcG9NZW51ID09PSBUaXBvTWVudU5hdmVnYWNpb24uRHJvcGRvd259XCI+XHJcbiAgICBAZm9yICh0YWIgb2YgbWVudU5hdmVnYWNpb247IHRyYWNrICRpbmRleCkge1xyXG4gICAgPGEgY2xhc3M9XCJmbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBjdXJzb3ItcG9pbnRlciBweC0zIHB5LTMgbGc6cHktMyB0ZXh0LW1kIGxnOnRleHQtbGcgcmVsYXRpdmUgbWVudS1uYXZlZ2FjaW9uX19vcGNpb25cIlxyXG4gICAgICByb3V0ZXJMaW5rPVwie3sgdGFiLnVybCA9PT0gJycgPyBsb2NhdGlvbi5wYXRoKCkgOiB0YWIudXJsIH19XCIgcm91dGVyTGlua0FjdGl2ZT1cIm1lbnUtbmF2ZWdhY2lvbl9fb3BjaW9uLS1hY3Rpdm9cIlxyXG4gICAgICAoY2xpY2spPVwiZXZlbnRvTWVudU5hdmVnYWNpb25TZWxlY2Npb25hcigkZXZlbnQsIHRhYilcIj5cclxuICAgICAgQGlmICh0YWIuaWNvbikge1xyXG4gICAgICA8aW1nIFtzcmNdPVwidGFiLmljb25cIiBhbHQ9XCJ7eyB0YWIubmFtZSB9fSBJY29uXCIgY2xhc3M9XCJwci0yXCIgc3R5bGU9XCJoZWlnaHQ6IDEuN3JlbTsgbWFyZ2luLWJvdHRvbTogMC4ycmVtXCIgLz5cclxuICAgICAgfVxyXG4gICAgICB7eyB0YWIubmFtZSB9fVxyXG4gICAgICBAaWYgKHRhYi5jb3VudCAmJiB0YWIuY291bnQgPiAwKSB7XHJcbiAgICAgIDxzcGFuIGNsYXNzPVwibWVudS1uYXZlZ2FjaW9uX19udW1lcm8gZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIganVzdGlmeS1jb250ZW50LWNlbnRlciBtbC0yIGJvcmRlci1yb3VuZFwiPnt7XHJcbiAgICAgICAgdGFiLmNvdW50IH19PC9zcGFuPlxyXG4gICAgICB9XHJcbiAgICAgIDwhLS0gSW5pIC0gTWVudSBEcm9wZG93biAtLT5cclxuICAgICAgQGlmICh0aXBvTWVudSA9PT0gVGlwb01lbnVOYXZlZ2FjaW9uLkRyb3Bkb3duKSB7XHJcbiAgICAgIEBpZiAobWVudU5hdmVnYWNpb25TZWxlY2Npb25hZG9JZD09PXRhYi5jb2RlKSB7XHJcbiAgICAgIDxpIGNsYXNzPVwicGkgcGktc29ydC11cC1maWxsIGFic29sdXRlIGJvdHRvbS0wIGxlZnQtNTAgaGlkZGVuIGxnOmJsb2NrXCIgc3R5bGU9XCJvcGFjaXR5OiAwLjZcIj48L2k+XHJcbiAgICAgIH0gQGlmICh0YWIub3B0aW9ucyAmJiB0YWIub3B0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIDxpIGNsYXNzPVwicGwtMiBwaVwiIHN0eWxlPVwibWFyZ2luLWxlZnQ6IGF1dG9cIiBbY2xhc3MucGktY2hldnJvbi1kb3duXT1cIiF0YWIuZXh0ZW5kZWRcIlxyXG4gICAgICAgIFtjbGFzcy5waS1jaGV2cm9uLXVwXT1cInRhYi5leHRlbmRlZFwiPjwvaT5cclxuICAgICAgQGlmICh0YWIuZXh0ZW5kZWQ9PT10cnVlKSB7XHJcbiAgICAgIDx1bCBjbGFzcz1cImFic29sdXRlIGxlZnQtMCBwLTAgbS0wIGJnLXdoaXRlIHctZnVsbCBsZzp3LTE4cmVtIGxnOmJvcmRlci1yb3VuZC1sZyBtZW51LW5hdmVnYWNpb25fX3N1Ym1lbnVcIj5cclxuICAgICAgICBAZm9yIChpdGVtIG9mIHRhYi5vcHRpb25zOyB0cmFjayAkaW5kZXgpIHtcclxuICAgICAgICA8bGkgY2xhc3M9XCJwLTAgbS0wXCI+XHJcbiAgICAgICAgICA8YSByb3V0ZXJMaW5rPVwie3sgaXRlbS51cmwgfX1cIiAoY2xpY2spPVwiZXZlbnRvU3VibWVudU5hdmVnYWNpb24oJGV2ZW50LCB0YWIpXCIgY2xhc3M9XCJibG9ja1wiPnt7IGl0ZW0ubmFtZVxyXG4gICAgICAgICAgICB9fTwvYT5cclxuICAgICAgICA8L2xpPlxyXG4gICAgICAgIH1cclxuICAgICAgPC91bD5cclxuICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgPCEtLSBGaW4gLSBNZW51IERyb3Bkb3duIC0tPlxyXG4gICAgPC9hPlxyXG4gICAgfVxyXG5cclxuICAgIDwhLS1JbmkgLSBNZW51IEJvdG9uZXMgLS0+XHJcbiAgICBAaWYgKHRpcG9NZW51ID09PSBUaXBvTWVudU5hdmVnYWNpb24uRHJvcGRvd24gJiYgbWVudU5hdmVnYWNpb25Cb3RvbmVzLmxlbmd0aCA+IDApIHtcclxuICAgIDxkaXYgc3R5bGU9XCJtYXJnaW4tbGVmdDogYXV0b1wiIGNsYXNzPVwiZmxleFwiPlxyXG4gICAgICBAZm9yIChpdGVtIG9mIG1lbnVOYXZlZ2FjaW9uQm90b25lczsgdHJhY2sgJGluZGV4KSB7XHJcbiAgICAgIDxidXR0b24gY2xhc3M9XCJyZWxhdGl2ZSB3LWZ1bGwgbGc6dy1hdXRvIGp1c3RpZnktY29udGVudC1zdGFydCBteC0yIHt7aXRlbS5zdHlsZUNsYXNzID8gaXRlbS5zdHlsZUNsYXNzIDogJyd9fVwiXHJcbiAgICAgICAgKGNsaWNrKT1cImV2ZW50b1N1Ym1lbnVEcm9wZG93bigkZXZlbnQsIGl0ZW0pXCIgW2F0dHIuZGlzYWJsZWRdPVwiaXRlbS5kaXNhYmxlZCA9PT0gdHJ1ZSA/IHRydWUgOiBudWxsXCI+XHJcbiAgICAgICAgQGlmKGl0ZW0uaWNvbiAmJiBpdGVtLmljb24hPT0nJyl7XHJcbiAgICAgICAgPGltZyBbc3JjXT1cIml0ZW0uaWNvblwiIGFsdD1cIkljb25vIHt7IGl0ZW0ubmFtZSB9fVwiIGNsYXNzPVwiY3Vyc29yLXBvaW50ZXIgcHItMVwiIHN0eWxlPVwiaGVpZ2h0OiAxLjVyZW1cIiAvPlxyXG4gICAgICAgIH1cclxuICAgICAgICB7eyBpdGVtLm5hbWUgfX1cclxuICAgICAgICBAaWYgKGl0ZW0ub3B0aW9ucyAmJiBpdGVtLm9wdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIDxpIGNsYXNzPVwicGwtMiBwaVwiIHN0eWxlPVwibWFyZ2luLWxlZnQ6IGF1dG9cIiBbY2xhc3MucGktY2hldnJvbi1kb3duXT1cIiFpdGVtLmV4dGVuZGVkXCJcclxuICAgICAgICAgIFtjbGFzcy5waS1jaGV2cm9uLXVwXT1cIml0ZW0uZXh0ZW5kZWRcIj48L2k+XHJcblxyXG4gICAgICAgIEBpZiAoaXRlbS5leHRlbmRlZD09PXRydWUpIHtcclxuICAgICAgICA8dWxcclxuICAgICAgICAgIGNsYXNzPVwiYWJzb2x1dGUgcmlnaHQtMCBwLTAgbS0wIGJnLXdoaXRlIHctZnVsbCBsZzp3LTE1cmVtIGxnOmJvcmRlci1yb3VuZC1sZyB0ZXh0LWxlZnQgbWVudS1uYXZlZ2FjaW9uX19zdWJtZW51XCI+XHJcbiAgICAgICAgICBAZm9yIChpdGVtIG9mIGl0ZW0ub3B0aW9uczsgdHJhY2sgJGluZGV4KSB7XHJcbiAgICAgICAgICA8bGkgY2xhc3M9XCJwLTAgbS0wXCI+XHJcbiAgICAgICAgICAgIDxhIHJvdXRlckxpbms9XCJ7eyBpdGVtLnVybCB9fVwiIChjbGljayk9XCJpdGVtLmV4dGVuZGVkID0gZmFsc2VcIiBjbGFzcz1cImJsb2NrXCI+e3sgaXRlbS5uYW1lIH19PC9hPlxyXG4gICAgICAgICAgPC9saT5cclxuICAgICAgICAgIH1cclxuICAgICAgICA8L3VsPlxyXG4gICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIDwvYnV0dG9uPlxyXG4gICAgICB9XHJcbiAgICA8L2Rpdj5cclxuICAgIH1cclxuICAgIDwhLS1GaW4gLSBNZW51IEJvdG9uZXMgLS0+XHJcbiAgPC9kaXY+XHJcblxyXG4gIEBpZiAodGlwb01lbnUgPT09IFRpcG9NZW51TmF2ZWdhY2lvbi5TaWRlYmFyKSB7XHJcbiAgPGRpdiBjbGFzcz1cImhpZGRlbiBsZzpibG9jayBtZW51LW5hdmVnYWNpb25fX3ZlcnNpb25cIj5cclxuICAgIFZlcnNpw7NuIHt7IHZlcnNpb24gfX1cclxuICA8L2Rpdj5cclxuICB9XHJcbjwvZGl2PlxyXG48IS0tRmluLU1lbnUgT3BjaW9uZXMtLT5cclxufVxyXG5cclxuPCEtLUluaSAtIE3DoXMgT3BjaW9uZXMgTW9kYWwgLS0+XHJcbkBpZiAobW9zdHJhck1hc09wY2lvbmVzPT09dHJ1ZSkge1xyXG48ZGl2IGNsYXNzPVwiYWJzb2x1dGUgYmctd2hpdGUgYm9yZGVyLXJvdW5kLXhsIGFwbGljYWNpb25lcyB6LTVcIj5cclxuICA8aW1nIFtzcmNdPVwiYmFzZUFzc2V0c1VybCArICcvaWNvbnMvY2xvc2Uuc3ZnJ1wiIGNsYXNzPVwiYWJzb2x1dGUgY3Vyc29yLXBvaW50ZXIgYXBsaWNhY2lvbmVzX19jZXJyYXJcIlxyXG4gICAgKGNsaWNrKT1cIm1vc3RyYXJNYXNPcGNpb25lcyA9IGZhbHNlXCIgYWx0PVwiaW1nXCIgLz5cclxuICA8ZGl2IGNsYXNzPVwidGV4dC0yeGwgdGV4dC1wcmltYXJ5IHB4LTMgcHktM1wiPkNhcnBldGEgRmlzY2FsIEVsZWN0csOzbmljbzwvZGl2PlxyXG4gIDxkaXYgY2xhc3M9XCJncmlkIGdyaWQtbm9ndXR0ZXIgYXBsaWNhY2lvbmVzX19vcGNpb25lc1wiPlxyXG4gICAgQGZvciAoYXBsaWNhY2lvbiBvZiBhcGxpY2FjaW9uZXM7IHRyYWNrICRpbmRleCkge1xyXG4gICAgPGRpdiBjbGFzcz1cImNvbC0xMiBzbTpjb2wtNiBhcGxpY2FjaW9uZXNfX29wY2lvblwiPlxyXG4gICAgICA8YSBocmVmPVwie3sgYXBsaWNhY2lvbi51cmwgfX1cIiBjbGFzcz1cImJsb2NrIHctZnVsbCBhcGxpY2FjaW9uZXNfX3ZpbmN1bG9cIj57eyBhcGxpY2FjaW9uLnNpc3RlbWEgfCB0aXRsZWNhc2UgfX08L2E+XHJcbiAgICA8L2Rpdj5cclxuICAgIH1cclxuICA8L2Rpdj5cclxuPC9kaXY+XHJcbn1cclxuPCEtLUZpbiAtIE3DoXMgT3BjaW9uZXMgTW9kYWwgLS0+Il19